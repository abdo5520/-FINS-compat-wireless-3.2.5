<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CompatWireless3.2: drivers/net/wireless/b43/xmit.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>drivers/net/wireless/b43/xmit.h</h1><a href="xmit_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef B43_XMIT_H_</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define B43_XMIT_H_</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &quot;<a class="code" href="main_8h.html">main.h</a>&quot;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;net/mac80211.h&gt;</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 
<a name="l00008"></a><a class="code" href="xmit_8h.html#a6341c8a861466614654c63a4070aed7b">00008</a> <span class="preprocessor">#define _b43_declare_plcp_hdr(size) \</span>
<a name="l00009"></a>00009 <span class="preprocessor">        struct b43_plcp_hdr##size {             \</span>
<a name="l00010"></a>00010 <span class="preprocessor">                union {                         \</span>
<a name="l00011"></a>00011 <span class="preprocessor">                        __le32 data;            \</span>
<a name="l00012"></a>00012 <span class="preprocessor">                        __u8 raw[size];         \</span>
<a name="l00013"></a>00013 <span class="preprocessor">                } __packed;     \</span>
<a name="l00014"></a>00014 <span class="preprocessor">        } __packed</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span>
<a name="l00016"></a>00016 <span class="comment">/* struct b43_plcp_hdr4 */</span>
<a name="l00017"></a>00017 <a class="code" href="xmit_8h.html#a6341c8a861466614654c63a4070aed7b">_b43_declare_plcp_hdr</a>(4);
<a name="l00018"></a>00018 <span class="comment">/* struct b43_plcp_hdr6 */</span>
<a name="l00019"></a>00019 <a class="code" href="xmit_8h.html#a6341c8a861466614654c63a4070aed7b">_b43_declare_plcp_hdr</a>(6);
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 <span class="preprocessor">#undef _b43_declare_plcp_hdr</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a>00023 <span class="comment">/* TX header for v4 firmware */</span>
<a name="l00024"></a><a class="code" href="structb43__txhdr.html">00024</a> <span class="keyword">struct </span><a class="code" href="structb43__txhdr.html">b43_txhdr</a> {
<a name="l00025"></a><a class="code" href="structb43__txhdr.html#a1b26e836b45c94befe6992b6753666b5">00025</a>         __le32 <a class="code" href="structb43__txhdr.html#a1b26e836b45c94befe6992b6753666b5">mac_ctl</a>;                 <span class="comment">/* MAC TX control */</span>
<a name="l00026"></a><a class="code" href="structb43__txhdr.html#ac1f5e828a967b5d9535c835745253230">00026</a>         __le16 <a class="code" href="structb43__txhdr.html#ac1f5e828a967b5d9535c835745253230">mac_frame_ctl</a>;           <span class="comment">/* Copy of the FrameControl field */</span>
<a name="l00027"></a><a class="code" href="structb43__txhdr.html#af428e00aa1739edc2e956600c0b94396">00027</a>         __le16 <a class="code" href="structb43__txhdr.html#af428e00aa1739edc2e956600c0b94396">tx_fes_time_norm</a>;        <span class="comment">/* TX FES Time Normal */</span>
<a name="l00028"></a><a class="code" href="structb43__txhdr.html#aa1bb4b6d765412bfdb1707552019fd23">00028</a>         __le16 <a class="code" href="structb43__txhdr.html#aa1bb4b6d765412bfdb1707552019fd23">phy_ctl</a>;                 <span class="comment">/* PHY TX control */</span>
<a name="l00029"></a><a class="code" href="structb43__txhdr.html#aba17bc3664ec50662a42cf9e6e05fcb1">00029</a>         __le16 <a class="code" href="structb43__txhdr.html#aba17bc3664ec50662a42cf9e6e05fcb1">phy_ctl1</a>;                <span class="comment">/* PHY TX control word 1 */</span>
<a name="l00030"></a><a class="code" href="structb43__txhdr.html#abc47f0ae781ceba3375df352e42a6d29">00030</a>         __le16 <a class="code" href="structb43__txhdr.html#abc47f0ae781ceba3375df352e42a6d29">phy_ctl1_fb</a>;             <span class="comment">/* PHY TX control word 1 for fallback rates */</span>
<a name="l00031"></a><a class="code" href="structb43__txhdr.html#af0cee2521a4e4d4aab70db13a82c319f">00031</a>         __le16 <a class="code" href="structb43__txhdr.html#af0cee2521a4e4d4aab70db13a82c319f">phy_ctl1_rts</a>;            <span class="comment">/* PHY TX control word 1 RTS */</span>
<a name="l00032"></a><a class="code" href="structb43__txhdr.html#a47d43cb55b0be997793ee3f18a5f9614">00032</a>         __le16 <a class="code" href="structb43__txhdr.html#a47d43cb55b0be997793ee3f18a5f9614">phy_ctl1_rts_fb</a>;         <span class="comment">/* PHY TX control word 1 RTS for fallback rates */</span>
<a name="l00033"></a><a class="code" href="structb43__txhdr.html#a0d08cba8358a48e01297d165dcbfcac8">00033</a>         __u8 <a class="code" href="structb43__txhdr.html#a0d08cba8358a48e01297d165dcbfcac8">phy_rate</a>;                  <span class="comment">/* PHY rate */</span>
<a name="l00034"></a><a class="code" href="structb43__txhdr.html#a207af9734cfb2bc2307ee7ef001d37af">00034</a>         __u8 <a class="code" href="structb43__txhdr.html#a207af9734cfb2bc2307ee7ef001d37af">phy_rate_rts</a>;              <span class="comment">/* PHY rate for RTS/CTS */</span>
<a name="l00035"></a><a class="code" href="structb43__txhdr.html#a590b2f52195652e328b5ed8c26efadce">00035</a>         __u8 <a class="code" href="structb43__txhdr.html#a590b2f52195652e328b5ed8c26efadce">extra_ft</a>;                  <span class="comment">/* Extra Frame Types */</span>
<a name="l00036"></a><a class="code" href="structb43__txhdr.html#ab051772cd85009c7a34ee9b199b69d59">00036</a>         __u8 <a class="code" href="structb43__txhdr.html#ab051772cd85009c7a34ee9b199b69d59">chan_radio_code</a>;           <span class="comment">/* Channel Radio Code */</span>
<a name="l00037"></a><a class="code" href="structb43__txhdr.html#a8a48d16640967aa6ddcb6f00d4f39148">00037</a>         __u8 <a class="code" href="structb43__txhdr.html#a8a48d16640967aa6ddcb6f00d4f39148">iv</a>[16];                    <span class="comment">/* Encryption IV */</span>
<a name="l00038"></a><a class="code" href="structb43__txhdr.html#ab55c222169aae8247bb97b8d84de6ff7">00038</a>         __u8 <a class="code" href="structb43__txhdr.html#ab55c222169aae8247bb97b8d84de6ff7">tx_receiver</a>[6];            <span class="comment">/* TX Frame Receiver address */</span>
<a name="l00039"></a><a class="code" href="structb43__txhdr.html#abe7763f55ec1c57770261ff9cac95812">00039</a>         __le16 <a class="code" href="structb43__txhdr.html#abe7763f55ec1c57770261ff9cac95812">tx_fes_time_fb</a>;          <span class="comment">/* TX FES Time Fallback */</span>
<a name="l00040"></a><a class="code" href="structb43__txhdr.html#ae97ef716e493931819adbf9c8a5d96b2">00040</a>         <span class="keyword">struct </span>b43_plcp_hdr6 <a class="code" href="structb43__txhdr.html#ae97ef716e493931819adbf9c8a5d96b2">rts_plcp_fb</a>; <span class="comment">/* RTS fallback PLCP header */</span>
<a name="l00041"></a><a class="code" href="structb43__txhdr.html#a3fb6f3a06768875beb0df7cb2d460880">00041</a>         __le16 <a class="code" href="structb43__txhdr.html#a3fb6f3a06768875beb0df7cb2d460880">rts_dur_fb</a>;              <span class="comment">/* RTS fallback duration */</span>
<a name="l00042"></a><a class="code" href="structb43__txhdr.html#a0d155a451e70f3316b0fbcefe9612b21">00042</a>         <span class="keyword">struct </span>b43_plcp_hdr6 <a class="code" href="structb43__txhdr.html#a0d155a451e70f3316b0fbcefe9612b21">plcp_fb</a>;   <span class="comment">/* Fallback PLCP header */</span>
<a name="l00043"></a><a class="code" href="structb43__txhdr.html#a02454336dc048e34a6e8deb131db99b3">00043</a>         __le16 <a class="code" href="structb43__txhdr.html#a02454336dc048e34a6e8deb131db99b3">dur_fb</a>;                  <span class="comment">/* Fallback duration */</span>
<a name="l00044"></a><a class="code" href="structb43__txhdr.html#a4473fb9d60c364ca7c19d76e919c2230">00044</a>         __le16 <a class="code" href="structb43__txhdr.html#a4473fb9d60c364ca7c19d76e919c2230">mimo_modelen</a>;            <span class="comment">/* MIMO mode length */</span>
<a name="l00045"></a><a class="code" href="structb43__txhdr.html#a7cc34df766b43bd4a303d8c83fe984ee">00045</a>         __le16 <a class="code" href="structb43__txhdr.html#a7cc34df766b43bd4a303d8c83fe984ee">mimo_ratelen_fb</a>;         <span class="comment">/* MIMO fallback rate length */</span>
<a name="l00046"></a><a class="code" href="structb43__txhdr.html#a7320408f8f5c66edf7adbfe174ebeec8">00046</a>         __le32 <a class="code" href="structb43__txhdr.html#a7320408f8f5c66edf7adbfe174ebeec8">timeout</a>;                 <span class="comment">/* Timeout */</span>
<a name="l00047"></a>00047 
<a name="l00048"></a>00048         <span class="keyword">union </span>{
<a name="l00049"></a>00049                 <span class="comment">/* Tested with 598.314, 644.1001 and 666.2 */</span>
<a name="l00050"></a>00050                 <span class="keyword">struct </span>{
<a name="l00051"></a><a class="code" href="structb43__txhdr.html#a80b7232e92dd8b98abad9d19d61a7804">00051</a>                         __le16 <a class="code" href="structb43__txhdr.html#a80b7232e92dd8b98abad9d19d61a7804">mimo_antenna</a>;            <span class="comment">/* MIMO antenna select */</span>
<a name="l00052"></a><a class="code" href="structb43__txhdr.html#a6d0faaab94d12dbb05b8f9f4e4166461">00052</a>                         __le16 <a class="code" href="structb43__txhdr.html#a6d0faaab94d12dbb05b8f9f4e4166461">preload_size</a>;            <span class="comment">/* Preload size */</span>
<a name="l00053"></a>00053                         <a class="code" href="main_8h.html#a8e829e3784a9ac29dbb4aff45fe0252e">PAD_BYTES</a>(2);
<a name="l00054"></a><a class="code" href="structb43__txhdr.html#a76ede5ffd5a829ba452939b48b67c101">00054</a>                         __le16 <a class="code" href="structb43__txhdr.html#a76ede5ffd5a829ba452939b48b67c101">cookie</a>;                  <span class="comment">/* TX frame cookie */</span>
<a name="l00055"></a><a class="code" href="structb43__txhdr.html#a8ccf10d2a89e523ef165668bf7fe78ae">00055</a>                         __le16 <a class="code" href="structb43__txhdr.html#a8ccf10d2a89e523ef165668bf7fe78ae">tx_status</a>;               <span class="comment">/* TX status */</span>
<a name="l00056"></a><a class="code" href="structb43__txhdr.html#ab48c96b3aece7aca919a83d20f2b8d50">00056</a>                         __le16 <a class="code" href="structb43__txhdr.html#ab48c96b3aece7aca919a83d20f2b8d50">max_n_mpdus</a>;
<a name="l00057"></a><a class="code" href="structb43__txhdr.html#aee680d3a989c257a07d461d602c34685">00057</a>                         __le16 <a class="code" href="structb43__txhdr.html#aee680d3a989c257a07d461d602c34685">max_a_bytes_mrt</a>;
<a name="l00058"></a><a class="code" href="structb43__txhdr.html#ac6dcd50b6e3f54fc0a6ea8b522485c8d">00058</a>                         __le16 <a class="code" href="structb43__txhdr.html#ac6dcd50b6e3f54fc0a6ea8b522485c8d">max_a_bytes_fbr</a>;
<a name="l00059"></a><a class="code" href="structb43__txhdr.html#a45ebccade0f97e87d70978c80f0034a2">00059</a>                         __le16 <a class="code" href="structb43__txhdr.html#a45ebccade0f97e87d70978c80f0034a2">min_m_bytes</a>;
<a name="l00060"></a><a class="code" href="structb43__txhdr.html#aa63f89c902b7f3980fd09d0c114f7bc8">00060</a>                         <span class="keyword">struct </span>b43_plcp_hdr6 <a class="code" href="structb43__txhdr.html#aa63f89c902b7f3980fd09d0c114f7bc8">rts_plcp</a>;  <span class="comment">/* RTS PLCP header */</span>
<a name="l00061"></a><a class="code" href="structb43__txhdr.html#a2178eb97e3e53082205e96927c2014f4">00061</a>                         __u8 <a class="code" href="structb43__txhdr.html#a2178eb97e3e53082205e96927c2014f4">rts_frame</a>[16];             <span class="comment">/* The RTS frame (if used) */</span>
<a name="l00062"></a>00062                         <a class="code" href="main_8h.html#a8e829e3784a9ac29dbb4aff45fe0252e">PAD_BYTES</a>(2);
<a name="l00063"></a><a class="code" href="structb43__txhdr.html#adce7a9221f6923cdcd7dc316fe843217">00063</a>                         <span class="keyword">struct </span>b43_plcp_hdr6 <a class="code" href="structb43__txhdr.html#adce7a9221f6923cdcd7dc316fe843217">plcp</a>;      <span class="comment">/* Main PLCP header */</span>
<a name="l00064"></a>00064                 } format_598 <a class="code" href="structb43__txhdr.html#a32314c79fedfc7218b8d0b13c38eba2f">__packed</a>;
<a name="l00065"></a>00065 
<a name="l00066"></a>00066                 <span class="comment">/* Tested with 410.2160, 478.104 and 508.* */</span>
<a name="l00067"></a>00067                 <span class="keyword">struct </span>{
<a name="l00068"></a>00068                         __le16 <a class="code" href="structb43__txhdr.html#a80b7232e92dd8b98abad9d19d61a7804">mimo_antenna</a>;            <span class="comment">/* MIMO antenna select */</span>
<a name="l00069"></a>00069                         __le16 <a class="code" href="structb43__txhdr.html#a6d0faaab94d12dbb05b8f9f4e4166461">preload_size</a>;            <span class="comment">/* Preload size */</span>
<a name="l00070"></a>00070                         <a class="code" href="main_8h.html#a8e829e3784a9ac29dbb4aff45fe0252e">PAD_BYTES</a>(2);
<a name="l00071"></a>00071                         __le16 <a class="code" href="structb43__txhdr.html#a76ede5ffd5a829ba452939b48b67c101">cookie</a>;                  <span class="comment">/* TX frame cookie */</span>
<a name="l00072"></a>00072                         __le16 <a class="code" href="structb43__txhdr.html#a8ccf10d2a89e523ef165668bf7fe78ae">tx_status</a>;               <span class="comment">/* TX status */</span>
<a name="l00073"></a>00073                         <span class="keyword">struct </span>b43_plcp_hdr6 <a class="code" href="structb43__txhdr.html#aa63f89c902b7f3980fd09d0c114f7bc8">rts_plcp</a>;  <span class="comment">/* RTS PLCP header */</span>
<a name="l00074"></a>00074                         __u8 <a class="code" href="structb43__txhdr.html#a2178eb97e3e53082205e96927c2014f4">rts_frame</a>[16];             <span class="comment">/* The RTS frame (if used) */</span>
<a name="l00075"></a>00075                         <a class="code" href="main_8h.html#a8e829e3784a9ac29dbb4aff45fe0252e">PAD_BYTES</a>(2);
<a name="l00076"></a>00076                         <span class="keyword">struct </span>b43_plcp_hdr6 <a class="code" href="structb43__txhdr.html#adce7a9221f6923cdcd7dc316fe843217">plcp</a>;      <span class="comment">/* Main PLCP header */</span>
<a name="l00077"></a>00077                 } format_410 <a class="code" href="structb43__txhdr.html#a32314c79fedfc7218b8d0b13c38eba2f">__packed</a>;
<a name="l00078"></a>00078 
<a name="l00079"></a>00079                 <span class="comment">/* Tested with 351.126 */</span>
<a name="l00080"></a>00080                 <span class="keyword">struct </span>{
<a name="l00081"></a>00081                         <a class="code" href="main_8h.html#a8e829e3784a9ac29dbb4aff45fe0252e">PAD_BYTES</a>(2);
<a name="l00082"></a>00082                         __le16 <a class="code" href="structb43__txhdr.html#a76ede5ffd5a829ba452939b48b67c101">cookie</a>;                  <span class="comment">/* TX frame cookie */</span>
<a name="l00083"></a>00083                         __le16 <a class="code" href="structb43__txhdr.html#a8ccf10d2a89e523ef165668bf7fe78ae">tx_status</a>;               <span class="comment">/* TX status */</span>
<a name="l00084"></a>00084                         <span class="keyword">struct </span>b43_plcp_hdr6 <a class="code" href="structb43__txhdr.html#aa63f89c902b7f3980fd09d0c114f7bc8">rts_plcp</a>;  <span class="comment">/* RTS PLCP header */</span>
<a name="l00085"></a>00085                         __u8 <a class="code" href="structb43__txhdr.html#a2178eb97e3e53082205e96927c2014f4">rts_frame</a>[16];             <span class="comment">/* The RTS frame (if used) */</span>
<a name="l00086"></a>00086                         <a class="code" href="main_8h.html#a8e829e3784a9ac29dbb4aff45fe0252e">PAD_BYTES</a>(2);
<a name="l00087"></a>00087                         <span class="keyword">struct </span>b43_plcp_hdr6 <a class="code" href="structb43__txhdr.html#adce7a9221f6923cdcd7dc316fe843217">plcp</a>;      <span class="comment">/* Main PLCP header */</span>
<a name="l00088"></a>00088                 } format_351 <a class="code" href="structb43__txhdr.html#a32314c79fedfc7218b8d0b13c38eba2f">__packed</a>;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090         } <a class="code" href="structb43__txhdr.html#a32314c79fedfc7218b8d0b13c38eba2f">__packed</a>;
<a name="l00091"></a>00091 } <a class="code" href="b43_8h.html#aeeac6b9cd8fd9c68189de8cf45630550">__packed</a>;
<a name="l00092"></a>00092 
<a name="l00093"></a><a class="code" href="structb43__tx__legacy__rate__phy__ctl__entry.html">00093</a> <span class="keyword">struct </span><a class="code" href="structb43__tx__legacy__rate__phy__ctl__entry.html">b43_tx_legacy_rate_phy_ctl_entry</a> {
<a name="l00094"></a><a class="code" href="structb43__tx__legacy__rate__phy__ctl__entry.html#acfe757d457167d7b7dac8cd4524a71ef">00094</a>         u8 <a class="code" href="structb43__tx__legacy__rate__phy__ctl__entry.html#acfe757d457167d7b7dac8cd4524a71ef">bitrate</a>;
<a name="l00095"></a><a class="code" href="structb43__tx__legacy__rate__phy__ctl__entry.html#a37ae6c1ac27f3e68b8d57f2231f05c28">00095</a>         u16 <a class="code" href="structb43__tx__legacy__rate__phy__ctl__entry.html#a37ae6c1ac27f3e68b8d57f2231f05c28">coding_rate</a>;
<a name="l00096"></a><a class="code" href="structb43__tx__legacy__rate__phy__ctl__entry.html#a4c549f87e4c0979f631d5402d768263f">00096</a>         u16 <a class="code" href="structb43__tx__legacy__rate__phy__ctl__entry.html#a4c549f87e4c0979f631d5402d768263f">modulation</a>;
<a name="l00097"></a>00097 };
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 <span class="comment">/* MAC TX control */</span>
<a name="l00100"></a><a class="code" href="xmit_8h.html#a4d87e42b16e83c80b288e99a141c14a3">00100</a> <span class="preprocessor">#define B43_TXH_MAC_USEFBR              0x10000000 </span><span class="comment">/* Use fallback rate for this AMPDU */</span>
<a name="l00101"></a><a class="code" href="xmit_8h.html#a4b5c9bda9f3ff6353344638717ba90e2">00101</a> <span class="preprocessor">#define B43_TXH_MAC_KEYIDX              0x0FF00000 </span><span class="comment">/* Security key index */</span>
<a name="l00102"></a><a class="code" href="xmit_8h.html#a339a1d70276148695e6d3d78b74a6586">00102</a> <span class="preprocessor">#define B43_TXH_MAC_KEYIDX_SHIFT        20</span>
<a name="l00103"></a><a class="code" href="xmit_8h.html#a219f55b1d79d998f34aa935e1f9c85c2">00103</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_TXH_MAC_KEYALG              0x00070000 </span><span class="comment">/* Security key algorithm */</span>
<a name="l00104"></a><a class="code" href="xmit_8h.html#a230edae65eb069fbc98818e9fe542477">00104</a> <span class="preprocessor">#define B43_TXH_MAC_KEYALG_SHIFT        16</span>
<a name="l00105"></a><a class="code" href="xmit_8h.html#a4c1c5817b4a6428a890405df07290149">00105</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_TXH_MAC_AMIC                0x00008000 </span><span class="comment">/* AMIC */</span>
<a name="l00106"></a><a class="code" href="xmit_8h.html#a61216891d22b66360ad1e8d20fb3d351">00106</a> <span class="preprocessor">#define B43_TXH_MAC_RIFS                0x00004000 </span><span class="comment">/* Use RIFS */</span>
<a name="l00107"></a><a class="code" href="xmit_8h.html#aafe46d0f7940c29cd0b4d699d600dcee">00107</a> <span class="preprocessor">#define B43_TXH_MAC_LIFETIME            0x00002000 </span><span class="comment">/* Lifetime */</span>
<a name="l00108"></a><a class="code" href="xmit_8h.html#ac766635c37b2da468f339d705ad1861d">00108</a> <span class="preprocessor">#define B43_TXH_MAC_FRAMEBURST          0x00001000 </span><span class="comment">/* Frameburst */</span>
<a name="l00109"></a><a class="code" href="xmit_8h.html#a1fb2731d8c3340a9d08ab4d396558b88">00109</a> <span class="preprocessor">#define B43_TXH_MAC_SENDCTS             0x00000800 </span><span class="comment">/* Send CTS-to-self */</span>
<a name="l00110"></a><a class="code" href="xmit_8h.html#a0594a5ebc5133a6fdf5486b45009c0d4">00110</a> <span class="preprocessor">#define B43_TXH_MAC_AMPDU               0x00000600 </span><span class="comment">/* AMPDU status */</span>
<a name="l00111"></a><a class="code" href="xmit_8h.html#a6b1586a483d43dcf67a628cc340ca677">00111</a> <span class="preprocessor">#define  B43_TXH_MAC_AMPDU_MPDU         0x00000000 </span><span class="comment">/* Regular MPDU, not an AMPDU */</span>
<a name="l00112"></a><a class="code" href="xmit_8h.html#aedd62eeb21b331c9daa066c0b8475344">00112</a> <span class="preprocessor">#define  B43_TXH_MAC_AMPDU_FIRST        0x00000200 </span><span class="comment">/* First MPDU or AMPDU */</span>
<a name="l00113"></a><a class="code" href="xmit_8h.html#a570a70cb33fcfe6edfeedee17f9cd7f7">00113</a> <span class="preprocessor">#define  B43_TXH_MAC_AMPDU_INTER        0x00000400 </span><span class="comment">/* Intermediate MPDU or AMPDU */</span>
<a name="l00114"></a><a class="code" href="xmit_8h.html#a6cf5a03eaeddb46d9ada6e769889065a">00114</a> <span class="preprocessor">#define  B43_TXH_MAC_AMPDU_LAST         0x00000600 </span><span class="comment">/* Last (or only) MPDU of AMPDU */</span>
<a name="l00115"></a><a class="code" href="xmit_8h.html#ab650799a32642aceb86fd5328af8a660">00115</a> <span class="preprocessor">#define B43_TXH_MAC_40MHZ               0x00000100 </span><span class="comment">/* Use 40 MHz bandwidth */</span>
<a name="l00116"></a><a class="code" href="xmit_8h.html#a3d2cfd68b770305a5f5feb79e6f8d67c">00116</a> <span class="preprocessor">#define B43_TXH_MAC_5GHZ                0x00000080 </span><span class="comment">/* 5GHz band */</span>
<a name="l00117"></a><a class="code" href="xmit_8h.html#a614388e76dd85d7090809ec8312d671e">00117</a> <span class="preprocessor">#define B43_TXH_MAC_DFCS                0x00000040 </span><span class="comment">/* DFCS */</span>
<a name="l00118"></a><a class="code" href="xmit_8h.html#a92c2386582221e87b9b176880e31bf57">00118</a> <span class="preprocessor">#define B43_TXH_MAC_IGNPMQ              0x00000020 </span><span class="comment">/* Ignore PMQ */</span>
<a name="l00119"></a><a class="code" href="xmit_8h.html#a734c7a750fa5d60556bda8c84eb4711a">00119</a> <span class="preprocessor">#define B43_TXH_MAC_HWSEQ               0x00000010 </span><span class="comment">/* Use Hardware Sequence Number */</span>
<a name="l00120"></a><a class="code" href="xmit_8h.html#abccfe7e3be06e1079d8d6844ed816ea3">00120</a> <span class="preprocessor">#define B43_TXH_MAC_STMSDU              0x00000008 </span><span class="comment">/* Start MSDU */</span>
<a name="l00121"></a><a class="code" href="xmit_8h.html#af165d0e25ff568522c56a7c0d0869570">00121</a> <span class="preprocessor">#define B43_TXH_MAC_SENDRTS             0x00000004 </span><span class="comment">/* Send RTS */</span>
<a name="l00122"></a><a class="code" href="xmit_8h.html#a79d041c70988428b3c2061f3659faa3a">00122</a> <span class="preprocessor">#define B43_TXH_MAC_LONGFRAME           0x00000002 </span><span class="comment">/* Long frame */</span>
<a name="l00123"></a><a class="code" href="xmit_8h.html#a22221bb78728e52c0f2db65fb77c2f69">00123</a> <span class="preprocessor">#define B43_TXH_MAC_ACK                 0x00000001 </span><span class="comment">/* Immediate ACK */</span>
<a name="l00124"></a>00124 
<a name="l00125"></a>00125 <span class="comment">/* Extra Frame Types */</span>
<a name="l00126"></a><a class="code" href="xmit_8h.html#a09cb5ef1da2cb380fa9bebaefa2622bd">00126</a> <span class="preprocessor">#define B43_TXH_EFT_FB                  0x03 </span><span class="comment">/* Data frame fallback encoding */</span>
<a name="l00127"></a><a class="code" href="xmit_8h.html#a361265ddc86d1207f12b82007b664222">00127</a> <span class="preprocessor">#define  B43_TXH_EFT_FB_CCK             0x00 </span><span class="comment">/* CCK */</span>
<a name="l00128"></a><a class="code" href="xmit_8h.html#ae883347adce176c3a2c4002f694e851a">00128</a> <span class="preprocessor">#define  B43_TXH_EFT_FB_OFDM            0x01 </span><span class="comment">/* OFDM */</span>
<a name="l00129"></a><a class="code" href="xmit_8h.html#aef71be7d05b91ce783c80e3270b19bcf">00129</a> <span class="preprocessor">#define  B43_TXH_EFT_FB_EWC             0x02 </span><span class="comment">/* EWC */</span>
<a name="l00130"></a><a class="code" href="xmit_8h.html#afc95245aa6fd8b17fe28f85752aefa92">00130</a> <span class="preprocessor">#define  B43_TXH_EFT_FB_N               0x03 </span><span class="comment">/* N */</span>
<a name="l00131"></a><a class="code" href="xmit_8h.html#a3540e241967d2f86d785b44127c170b5">00131</a> <span class="preprocessor">#define B43_TXH_EFT_RTS                 0x0C </span><span class="comment">/* RTS/CTS encoding */</span>
<a name="l00132"></a><a class="code" href="xmit_8h.html#af4292ab4bfd5a79d81b1239ec4a6d1ac">00132</a> <span class="preprocessor">#define  B43_TXH_EFT_RTS_CCK            0x00 </span><span class="comment">/* CCK */</span>
<a name="l00133"></a><a class="code" href="xmit_8h.html#a1b53f826c2fb483fe4d734730d722f83">00133</a> <span class="preprocessor">#define  B43_TXH_EFT_RTS_OFDM           0x04 </span><span class="comment">/* OFDM */</span>
<a name="l00134"></a><a class="code" href="xmit_8h.html#a09d03bade3c025f10cdd3707007bda31">00134</a> <span class="preprocessor">#define  B43_TXH_EFT_RTS_EWC            0x08 </span><span class="comment">/* EWC */</span>
<a name="l00135"></a><a class="code" href="xmit_8h.html#a5aab060644e0ae6b8e1029d638c4d648">00135</a> <span class="preprocessor">#define  B43_TXH_EFT_RTS_N              0x0C </span><span class="comment">/* N */</span>
<a name="l00136"></a><a class="code" href="xmit_8h.html#ac6a13c1d1516c245376e189f5d984e2d">00136</a> <span class="preprocessor">#define B43_TXH_EFT_RTSFB               0x30 </span><span class="comment">/* RTS/CTS fallback encoding */</span>
<a name="l00137"></a><a class="code" href="xmit_8h.html#a06ac50ae2c8e22c9de1caa25f7544742">00137</a> <span class="preprocessor">#define  B43_TXH_EFT_RTSFB_CCK          0x00 </span><span class="comment">/* CCK */</span>
<a name="l00138"></a><a class="code" href="xmit_8h.html#aaab8480e695c8b0413ca99a2fcd2cfd4">00138</a> <span class="preprocessor">#define  B43_TXH_EFT_RTSFB_OFDM         0x10 </span><span class="comment">/* OFDM */</span>
<a name="l00139"></a><a class="code" href="xmit_8h.html#a27168f14d1dc99e6d3082fb0c4eb9cbd">00139</a> <span class="preprocessor">#define  B43_TXH_EFT_RTSFB_EWC          0x20 </span><span class="comment">/* EWC */</span>
<a name="l00140"></a><a class="code" href="xmit_8h.html#a14af65e0c13ae6ce625d1af58b9ee8dc">00140</a> <span class="preprocessor">#define  B43_TXH_EFT_RTSFB_N            0x30 </span><span class="comment">/* N */</span>
<a name="l00141"></a>00141 
<a name="l00142"></a>00142 <span class="comment">/* PHY TX control word */</span>
<a name="l00143"></a><a class="code" href="xmit_8h.html#af48fa05e6667a573205bdd95f3fd57f1">00143</a> <span class="preprocessor">#define B43_TXH_PHY_ENC                 0x0003 </span><span class="comment">/* Data frame encoding */</span>
<a name="l00144"></a><a class="code" href="xmit_8h.html#a70dd7a8a58c4a27fb941236308ac97c6">00144</a> <span class="preprocessor">#define  B43_TXH_PHY_ENC_CCK            0x0000 </span><span class="comment">/* CCK */</span>
<a name="l00145"></a><a class="code" href="xmit_8h.html#a2033a75c2e01b4d2dfd4c52e290b39ac">00145</a> <span class="preprocessor">#define  B43_TXH_PHY_ENC_OFDM           0x0001 </span><span class="comment">/* OFDM */</span>
<a name="l00146"></a><a class="code" href="xmit_8h.html#acee74b619b96b2c3a6d811824368e76f">00146</a> <span class="preprocessor">#define  B43_TXH_PHY_ENC_EWC            0x0002 </span><span class="comment">/* EWC */</span>
<a name="l00147"></a><a class="code" href="xmit_8h.html#a96f49383676b3fa9a8500fbf145f8caf">00147</a> <span class="preprocessor">#define  B43_TXH_PHY_ENC_N              0x0003 </span><span class="comment">/* N */</span>
<a name="l00148"></a><a class="code" href="xmit_8h.html#a4a985da42697c7005f9c1029269ab2d8">00148</a> <span class="preprocessor">#define B43_TXH_PHY_SHORTPRMBL          0x0010 </span><span class="comment">/* Use short preamble */</span>
<a name="l00149"></a><a class="code" href="xmit_8h.html#af9bcfe9f03681d3209d0ee1d4e6d8631">00149</a> <span class="preprocessor">#define B43_TXH_PHY_ANT                 0x03C0 </span><span class="comment">/* Antenna selection */</span>
<a name="l00150"></a><a class="code" href="xmit_8h.html#aa317f5e4329c2d729301ecf06d2c3b23">00150</a> <span class="preprocessor">#define  B43_TXH_PHY_ANT0               0x0000 </span><span class="comment">/* Use antenna 0 */</span>
<a name="l00151"></a><a class="code" href="xmit_8h.html#a2e19a4226a5c29e916376c0d10e037ae">00151</a> <span class="preprocessor">#define  B43_TXH_PHY_ANT1               0x0040 </span><span class="comment">/* Use antenna 1 */</span>
<a name="l00152"></a><a class="code" href="xmit_8h.html#a9dfd27b1454803d128074fc88c86f68a">00152</a> <span class="preprocessor">#define  B43_TXH_PHY_ANT01AUTO          0x00C0 </span><span class="comment">/* Use antenna 0/1 auto */</span>
<a name="l00153"></a><a class="code" href="xmit_8h.html#a0b7ea2f9bb6bc195ad07113d4d2b79a9">00153</a> <span class="preprocessor">#define  B43_TXH_PHY_ANT2               0x0100 </span><span class="comment">/* Use antenna 2 */</span>
<a name="l00154"></a><a class="code" href="xmit_8h.html#a3dcec90ecad2366b00916c6d0da66d97">00154</a> <span class="preprocessor">#define  B43_TXH_PHY_ANT3               0x0200 </span><span class="comment">/* Use antenna 3 */</span>
<a name="l00155"></a><a class="code" href="xmit_8h.html#a20e7f4b7611bb871b1ae58d6b329c279">00155</a> <span class="preprocessor">#define B43_TXH_PHY_TXPWR               0xFC00 </span><span class="comment">/* TX power */</span>
<a name="l00156"></a><a class="code" href="xmit_8h.html#a6c0d210bbf9f161de5a8e94d985fc688">00156</a> <span class="preprocessor">#define B43_TXH_PHY_TXPWR_SHIFT         10</span>
<a name="l00157"></a>00157 <span class="preprocessor"></span>
<a name="l00158"></a>00158 <span class="comment">/* PHY TX control word 1 */</span>
<a name="l00159"></a><a class="code" href="xmit_8h.html#afe07ed2fa70d7753b079eed11d2766b0">00159</a> <span class="preprocessor">#define B43_TXH_PHY1_BW                 0x0007 </span><span class="comment">/* Bandwidth */</span>
<a name="l00160"></a><a class="code" href="xmit_8h.html#ab1b9b23a0fabfc173e1d29107981c97c">00160</a> <span class="preprocessor">#define  B43_TXH_PHY1_BW_10             0x0000 </span><span class="comment">/* 10 MHz */</span>
<a name="l00161"></a><a class="code" href="xmit_8h.html#abe0e957f9ec5f0111ce67b7d779cc054">00161</a> <span class="preprocessor">#define  B43_TXH_PHY1_BW_10U            0x0001 </span><span class="comment">/* 10 MHz upper */</span>
<a name="l00162"></a><a class="code" href="xmit_8h.html#ab9938211b7f4b4e6827ad79b72ba20cc">00162</a> <span class="preprocessor">#define  B43_TXH_PHY1_BW_20             0x0002 </span><span class="comment">/* 20 MHz */</span>
<a name="l00163"></a><a class="code" href="xmit_8h.html#abee8f216e458e8ae6a41ba5083bdab40">00163</a> <span class="preprocessor">#define  B43_TXH_PHY1_BW_20U            0x0003 </span><span class="comment">/* 20 MHz upper */</span>
<a name="l00164"></a><a class="code" href="xmit_8h.html#a465212acfad8704c899242bfdd966b89">00164</a> <span class="preprocessor">#define  B43_TXH_PHY1_BW_40             0x0004 </span><span class="comment">/* 40 MHz */</span>
<a name="l00165"></a><a class="code" href="xmit_8h.html#a3150269ace85140c772a690afee1bdaa">00165</a> <span class="preprocessor">#define  B43_TXH_PHY1_BW_40DUP          0x0005 </span><span class="comment">/* 50 MHz duplicate */</span>
<a name="l00166"></a><a class="code" href="xmit_8h.html#ab7c9d81b690bebd2db4134abd9fbe6e6">00166</a> <span class="preprocessor">#define B43_TXH_PHY1_MODE               0x0038 </span><span class="comment">/* Mode */</span>
<a name="l00167"></a><a class="code" href="xmit_8h.html#a30f9e30d40630539a13ce14b852bbb20">00167</a> <span class="preprocessor">#define  B43_TXH_PHY1_MODE_SISO         0x0000 </span><span class="comment">/* SISO */</span>
<a name="l00168"></a><a class="code" href="xmit_8h.html#a0f21e58e1590b362bcdaf80e3b460f65">00168</a> <span class="preprocessor">#define  B43_TXH_PHY1_MODE_CDD          0x0008 </span><span class="comment">/* CDD */</span>
<a name="l00169"></a><a class="code" href="xmit_8h.html#a91c18e880c2cefb7aeace68c59a65235">00169</a> <span class="preprocessor">#define  B43_TXH_PHY1_MODE_STBC         0x0010 </span><span class="comment">/* STBC */</span>
<a name="l00170"></a><a class="code" href="xmit_8h.html#adc82e91a86d2e963816e7e57d9d89172">00170</a> <span class="preprocessor">#define  B43_TXH_PHY1_MODE_SDM          0x0018 </span><span class="comment">/* SDM */</span>
<a name="l00171"></a><a class="code" href="xmit_8h.html#ad39903a06077ffbbd90aa0eb289db0da">00171</a> <span class="preprocessor">#define B43_TXH_PHY1_CRATE              0x0700 </span><span class="comment">/* Coding rate */</span>
<a name="l00172"></a><a class="code" href="xmit_8h.html#a4c9d6346223e6d6d700c6891a1467efa">00172</a> <span class="preprocessor">#define  B43_TXH_PHY1_CRATE_1_2         0x0000 </span><span class="comment">/* 1/2 */</span>
<a name="l00173"></a><a class="code" href="xmit_8h.html#a18e47771e11f9fb8fd850268f9f44863">00173</a> <span class="preprocessor">#define  B43_TXH_PHY1_CRATE_2_3         0x0100 </span><span class="comment">/* 2/3 */</span>
<a name="l00174"></a><a class="code" href="xmit_8h.html#a249ced1b738638fb946e84965d5c99fe">00174</a> <span class="preprocessor">#define  B43_TXH_PHY1_CRATE_3_4         0x0200 </span><span class="comment">/* 3/4 */</span>
<a name="l00175"></a><a class="code" href="xmit_8h.html#a1a70a6ee94479de0571ce977c8e5f780">00175</a> <span class="preprocessor">#define  B43_TXH_PHY1_CRATE_4_5         0x0300 </span><span class="comment">/* 4/5 */</span>
<a name="l00176"></a><a class="code" href="xmit_8h.html#a703224410367941470bce18eabc0b195">00176</a> <span class="preprocessor">#define  B43_TXH_PHY1_CRATE_5_6         0x0400 </span><span class="comment">/* 5/6 */</span>
<a name="l00177"></a><a class="code" href="xmit_8h.html#a13c204ae19a6d14129b96f0c8d2affc9">00177</a> <span class="preprocessor">#define  B43_TXH_PHY1_CRATE_7_8         0x0600 </span><span class="comment">/* 7/8 */</span>
<a name="l00178"></a><a class="code" href="xmit_8h.html#a5a0742fd6abd0d3c546bdcf6f42c12a8">00178</a> <span class="preprocessor">#define B43_TXH_PHY1_MODUL              0x3800 </span><span class="comment">/* Modulation scheme */</span>
<a name="l00179"></a><a class="code" href="xmit_8h.html#a9881cf0933c800162a91b317d55c0591">00179</a> <span class="preprocessor">#define  B43_TXH_PHY1_MODUL_BPSK        0x0000 </span><span class="comment">/* BPSK */</span>
<a name="l00180"></a><a class="code" href="xmit_8h.html#ad496737819b248473156e19e5e8269f1">00180</a> <span class="preprocessor">#define  B43_TXH_PHY1_MODUL_QPSK        0x0800 </span><span class="comment">/* QPSK */</span>
<a name="l00181"></a><a class="code" href="xmit_8h.html#a5ccf5149945cc4c7ac6de6e174067876">00181</a> <span class="preprocessor">#define  B43_TXH_PHY1_MODUL_QAM16       0x1000 </span><span class="comment">/* QAM16 */</span>
<a name="l00182"></a><a class="code" href="xmit_8h.html#a97b58dc66289b9d751225099c7b471a4">00182</a> <span class="preprocessor">#define  B43_TXH_PHY1_MODUL_QAM64       0x1800 </span><span class="comment">/* QAM64 */</span>
<a name="l00183"></a><a class="code" href="xmit_8h.html#a0b4c1704397a1fc92ff4b2dc843549ab">00183</a> <span class="preprocessor">#define  B43_TXH_PHY1_MODUL_QAM256      0x2000 </span><span class="comment">/* QAM256 */</span>
<a name="l00184"></a>00184 
<a name="l00185"></a>00185 
<a name="l00186"></a>00186 <span class="keyword">static</span> <span class="keyword">inline</span>
<a name="l00187"></a><a class="code" href="xmit_8h.html#aefb22eec00cb7bd01d34221e000950f3">00187</a> <span class="keywordtype">size_t</span> <a class="code" href="xmit_8h.html#aefb22eec00cb7bd01d34221e000950f3">b43_txhdr_size</a>(<span class="keyword">struct</span> <a class="code" href="structb43__wldev.html">b43_wldev</a> *dev)
<a name="l00188"></a>00188 {
<a name="l00189"></a>00189         <span class="keywordflow">switch</span> (dev-&gt;<a class="code" href="structb43__wldev.html#a2d34947d765ba46b05f5f7fe6186c304">fw</a>.<a class="code" href="structb43__firmware.html#aa288b3cb21988f25ed80138a7bf9b87c">hdr_format</a>) {
<a name="l00190"></a>00190         <span class="keywordflow">case</span> <a class="code" href="b43_8h.html#acd7f1fa16f219c284b6d6e4fb3b320b4ac0a9a6865f770f0d46bae72394581aac">B43_FW_HDR_598</a>:
<a name="l00191"></a>00191                 <span class="keywordflow">return</span> 112 + <span class="keyword">sizeof</span>(<span class="keyword">struct </span>b43_plcp_hdr6);
<a name="l00192"></a>00192         <span class="keywordflow">case</span> <a class="code" href="b43_8h.html#acd7f1fa16f219c284b6d6e4fb3b320b4a55930e9a94a227596430fd73cd40c73a">B43_FW_HDR_410</a>:
<a name="l00193"></a>00193                 <span class="keywordflow">return</span> 104 + <span class="keyword">sizeof</span>(<span class="keyword">struct </span>b43_plcp_hdr6);
<a name="l00194"></a>00194         <span class="keywordflow">case</span> <a class="code" href="b43_8h.html#acd7f1fa16f219c284b6d6e4fb3b320b4a321defcd5af8101e2832ae36cf92e19c">B43_FW_HDR_351</a>:
<a name="l00195"></a>00195                 <span class="keywordflow">return</span> 100 + <span class="keyword">sizeof</span>(<span class="keyword">struct </span>b43_plcp_hdr6);
<a name="l00196"></a>00196         }
<a name="l00197"></a>00197         <span class="keywordflow">return</span> 0;
<a name="l00198"></a>00198 }
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 
<a name="l00201"></a>00201 <span class="keywordtype">int</span> <a class="code" href="xmit_8c.html#a84b031e3a96da2c0ab26f0a29c7f2e31">b43_generate_txhdr</a>(<span class="keyword">struct</span> <a class="code" href="structb43__wldev.html">b43_wldev</a> *dev,
<a name="l00202"></a>00202                        u8 * txhdr,
<a name="l00203"></a>00203                        <span class="keyword">struct</span> sk_buff *skb_frag,
<a name="l00204"></a>00204                        <span class="keyword">struct</span> ieee80211_tx_info *txctl, u16 cookie);
<a name="l00205"></a>00205 
<a name="l00206"></a>00206 <span class="comment">/* Transmit Status */</span>
<a name="l00207"></a><a class="code" href="structb43__txstatus.html">00207</a> <span class="keyword">struct </span><a class="code" href="structb43__txstatus.html">b43_txstatus</a> {
<a name="l00208"></a><a class="code" href="structb43__txstatus.html#ac5ea4cc9f2a689996a20c7f496fb3f43">00208</a>         u16 <a class="code" href="structb43__txstatus.html#ac5ea4cc9f2a689996a20c7f496fb3f43">cookie</a>;             <span class="comment">/* The cookie from the txhdr */</span>
<a name="l00209"></a><a class="code" href="structb43__txstatus.html#a1972def3f7f65862308f59d92ee24fd3">00209</a>         u16 <a class="code" href="structb43__txstatus.html#a1972def3f7f65862308f59d92ee24fd3">seq</a>;                <span class="comment">/* Sequence number */</span>
<a name="l00210"></a><a class="code" href="structb43__txstatus.html#af8bc310889f7ab586d7f33b61ba72d18">00210</a>         u8 <a class="code" href="structb43__txstatus.html#af8bc310889f7ab586d7f33b61ba72d18">phy_stat</a>;            <span class="comment">/* PHY TX status */</span>
<a name="l00211"></a><a class="code" href="structb43__txstatus.html#a672b8a541457a986555df51d4a7e701a">00211</a>         u8 <a class="code" href="structb43__txstatus.html#a672b8a541457a986555df51d4a7e701a">frame_count</a>;         <span class="comment">/* Frame transmit count */</span>
<a name="l00212"></a><a class="code" href="structb43__txstatus.html#ac7fdc0bf25af9d5aea36ccf01ab688c3">00212</a>         u8 <a class="code" href="structb43__txstatus.html#ac7fdc0bf25af9d5aea36ccf01ab688c3">rts_count</a>;           <span class="comment">/* RTS transmit count */</span>
<a name="l00213"></a><a class="code" href="structb43__txstatus.html#a5024763a55438282d36d7008beeb1dfa">00213</a>         u8 <a class="code" href="structb43__txstatus.html#a5024763a55438282d36d7008beeb1dfa">supp_reason</a>;         <span class="comment">/* Suppression reason */</span>
<a name="l00214"></a>00214         <span class="comment">/* flags */</span>
<a name="l00215"></a><a class="code" href="structb43__txstatus.html#aa0701c87b674a1950ece420f51a23539">00215</a>         u8 <a class="code" href="structb43__txstatus.html#aa0701c87b674a1950ece420f51a23539">pm_indicated</a>;        <span class="comment">/* PM mode indicated to AP */</span>
<a name="l00216"></a><a class="code" href="structb43__txstatus.html#a7db591401c02e27179a3c39153b5059d">00216</a>         u8 <a class="code" href="structb43__txstatus.html#a7db591401c02e27179a3c39153b5059d">intermediate</a>;        <span class="comment">/* Intermediate status notification (not final) */</span>
<a name="l00217"></a><a class="code" href="structb43__txstatus.html#a1b4a6f036b5df41bdd9147b7ee92cfe5">00217</a>         u8 <a class="code" href="structb43__txstatus.html#a1b4a6f036b5df41bdd9147b7ee92cfe5">for_ampdu</a>;           <span class="comment">/* Status is for an AMPDU (afterburner) */</span>
<a name="l00218"></a><a class="code" href="structb43__txstatus.html#af175e7d103607e97b889c203b7425aeb">00218</a>         u8 <a class="code" href="structb43__txstatus.html#af175e7d103607e97b889c203b7425aeb">acked</a>;               <span class="comment">/* Wireless ACK received */</span>
<a name="l00219"></a>00219 };
<a name="l00220"></a>00220 
<a name="l00221"></a>00221 <span class="comment">/* txstatus supp_reason values */</span>
<a name="l00222"></a>00222 <span class="keyword">enum</span> {
<a name="l00223"></a><a class="code" href="xmit_8h.html#aba01db17f4a2bfbc3db60dc172972a25abb794f89241ca3b66f2feb9955b4a6e9">00223</a>         <a class="code" href="xmit_8h.html#aba01db17f4a2bfbc3db60dc172972a25abb794f89241ca3b66f2feb9955b4a6e9">B43_TXST_SUPP_NONE</a>,     <span class="comment">/* Not suppressed */</span>
<a name="l00224"></a><a class="code" href="xmit_8h.html#aba01db17f4a2bfbc3db60dc172972a25aaf3ea6b7e26d52788036e55adc9daeb1">00224</a>         <a class="code" href="xmit_8h.html#aba01db17f4a2bfbc3db60dc172972a25aaf3ea6b7e26d52788036e55adc9daeb1">B43_TXST_SUPP_PMQ</a>,      <span class="comment">/* Suppressed due to PMQ entry */</span>
<a name="l00225"></a><a class="code" href="xmit_8h.html#aba01db17f4a2bfbc3db60dc172972a25af10d48c147e5abd2707a6121cf41efe1">00225</a>         <a class="code" href="xmit_8h.html#aba01db17f4a2bfbc3db60dc172972a25af10d48c147e5abd2707a6121cf41efe1">B43_TXST_SUPP_FLUSH</a>,    <span class="comment">/* Suppressed due to flush request */</span>
<a name="l00226"></a><a class="code" href="xmit_8h.html#aba01db17f4a2bfbc3db60dc172972a25a1e2741a0476e4aca4b3a9c1ff42eb351">00226</a>         <a class="code" href="xmit_8h.html#aba01db17f4a2bfbc3db60dc172972a25a1e2741a0476e4aca4b3a9c1ff42eb351">B43_TXST_SUPP_PREV</a>,     <span class="comment">/* Previous fragment failed */</span>
<a name="l00227"></a><a class="code" href="xmit_8h.html#aba01db17f4a2bfbc3db60dc172972a25a7b42c62206fb47cff6c5d5d6bb662a83">00227</a>         <a class="code" href="xmit_8h.html#aba01db17f4a2bfbc3db60dc172972a25a7b42c62206fb47cff6c5d5d6bb662a83">B43_TXST_SUPP_CHAN</a>,     <span class="comment">/* Channel mismatch */</span>
<a name="l00228"></a><a class="code" href="xmit_8h.html#aba01db17f4a2bfbc3db60dc172972a25af491e23f420680f8040e06ec9410c656">00228</a>         <a class="code" href="xmit_8h.html#aba01db17f4a2bfbc3db60dc172972a25af491e23f420680f8040e06ec9410c656">B43_TXST_SUPP_LIFE</a>,     <span class="comment">/* Lifetime expired */</span>
<a name="l00229"></a><a class="code" href="xmit_8h.html#aba01db17f4a2bfbc3db60dc172972a25a71f3b2c2d8c7e863bec73ee70e3c194a">00229</a>         <a class="code" href="xmit_8h.html#aba01db17f4a2bfbc3db60dc172972a25a71f3b2c2d8c7e863bec73ee70e3c194a">B43_TXST_SUPP_UNDER</a>,    <span class="comment">/* Buffer underflow */</span>
<a name="l00230"></a><a class="code" href="xmit_8h.html#aba01db17f4a2bfbc3db60dc172972a25a6a4f57603d76c59852a34d2c0f8c185b">00230</a>         <a class="code" href="xmit_8h.html#aba01db17f4a2bfbc3db60dc172972a25a6a4f57603d76c59852a34d2c0f8c185b">B43_TXST_SUPP_ABNACK</a>,   <span class="comment">/* Afterburner NACK */</span>
<a name="l00231"></a>00231 };
<a name="l00232"></a>00232 
<a name="l00233"></a>00233 <span class="comment">/* Receive header for v4 firmware. */</span>
<a name="l00234"></a><a class="code" href="structb43__rxhdr__fw4.html">00234</a> <span class="keyword">struct </span><a class="code" href="structb43__rxhdr__fw4.html">b43_rxhdr_fw4</a> {
<a name="l00235"></a><a class="code" href="structb43__rxhdr__fw4.html#af7ffbee006a3801b99eaef2cc71396de">00235</a>         __le16 <a class="code" href="structb43__rxhdr__fw4.html#af7ffbee006a3801b99eaef2cc71396de">frame_len</a>;       <span class="comment">/* Frame length */</span>
<a name="l00236"></a>00236          <a class="code" href="structb43__rxhdr__fw4.html#abd587e85f8da97724198f111560ab5f6">PAD_BYTES</a>(2);
<a name="l00237"></a><a class="code" href="structb43__rxhdr__fw4.html#a50531d7311ef8b9027b2dbf3f6c4dab4">00237</a>         __le16 <a class="code" href="structb43__rxhdr__fw4.html#a50531d7311ef8b9027b2dbf3f6c4dab4">phy_status0</a>;     <span class="comment">/* PHY RX Status 0 */</span>
<a name="l00238"></a>00238         <span class="keyword">union </span>{
<a name="l00239"></a>00239                 <span class="comment">/* RSSI for A/B/G-PHYs */</span>
<a name="l00240"></a>00240                 <span class="keyword">struct </span>{
<a name="l00241"></a><a class="code" href="structb43__rxhdr__fw4.html#a20c37e382d552f83635d6993109bf4dc">00241</a>                         __u8 <a class="code" href="structb43__rxhdr__fw4.html#a20c37e382d552f83635d6993109bf4dc">jssi</a>;      <span class="comment">/* PHY RX Status 1: JSSI */</span>
<a name="l00242"></a><a class="code" href="structb43__rxhdr__fw4.html#a2c1780d418a03b1a7f481b504e2cbdc1">00242</a>                         __u8 <a class="code" href="structb43__rxhdr__fw4.html#a2c1780d418a03b1a7f481b504e2cbdc1">sig_qual</a>;  <span class="comment">/* PHY RX Status 1: Signal Quality */</span>
<a name="l00243"></a>00243                 } <a class="code" href="structb43__rxhdr__fw4.html#a224fa3e6463b11f337ae2e0f1eb46781">__packed</a>;
<a name="l00244"></a>00244 
<a name="l00245"></a>00245                 <span class="comment">/* RSSI for N-PHYs */</span>
<a name="l00246"></a>00246                 <span class="keyword">struct </span>{
<a name="l00247"></a><a class="code" href="structb43__rxhdr__fw4.html#abec77dec0c6f484d340e05e524a21e53">00247</a>                         __s8 <a class="code" href="structb43__rxhdr__fw4.html#abec77dec0c6f484d340e05e524a21e53">power0</a>;    <span class="comment">/* PHY RX Status 1: Power 0 */</span>
<a name="l00248"></a><a class="code" href="structb43__rxhdr__fw4.html#a33a5c443719dd16dd507ae2eaaf5e374">00248</a>                         __s8 <a class="code" href="structb43__rxhdr__fw4.html#a33a5c443719dd16dd507ae2eaaf5e374">power1</a>;    <span class="comment">/* PHY RX Status 1: Power 1 */</span>
<a name="l00249"></a>00249                 } <a class="code" href="structb43__rxhdr__fw4.html#a224fa3e6463b11f337ae2e0f1eb46781">__packed</a>;
<a name="l00250"></a>00250         } <a class="code" href="structb43__rxhdr__fw4.html#a224fa3e6463b11f337ae2e0f1eb46781">__packed</a>;
<a name="l00251"></a>00251         <span class="keyword">union </span>{
<a name="l00252"></a>00252                 <span class="comment">/* HT-PHY */</span>
<a name="l00253"></a>00253                 <span class="keyword">struct </span>{
<a name="l00254"></a>00254                         <a class="code" href="structb43__rxhdr__fw4.html#abd587e85f8da97724198f111560ab5f6">PAD_BYTES</a>(1);
<a name="l00255"></a><a class="code" href="structb43__rxhdr__fw4.html#a4afc9dd3b3245cddfbfb1f2eeba903ba">00255</a>                         __s8 <a class="code" href="structb43__rxhdr__fw4.html#a4afc9dd3b3245cddfbfb1f2eeba903ba">phy_ht_power0</a>;
<a name="l00256"></a>00256                 } <a class="code" href="structb43__rxhdr__fw4.html#a224fa3e6463b11f337ae2e0f1eb46781">__packed</a>;
<a name="l00257"></a>00257 
<a name="l00258"></a>00258                 <span class="comment">/* RSSI for N-PHYs */</span>
<a name="l00259"></a>00259                 <span class="keyword">struct </span>{
<a name="l00260"></a><a class="code" href="structb43__rxhdr__fw4.html#a3cdcc87edf2a2153b4a433339458cac3">00260</a>                         __s8 <a class="code" href="structb43__rxhdr__fw4.html#a3cdcc87edf2a2153b4a433339458cac3">power2</a>;
<a name="l00261"></a>00261                         <a class="code" href="structb43__rxhdr__fw4.html#abd587e85f8da97724198f111560ab5f6">PAD_BYTES</a>(1);
<a name="l00262"></a>00262                 } <a class="code" href="structb43__rxhdr__fw4.html#a224fa3e6463b11f337ae2e0f1eb46781">__packed</a>;
<a name="l00263"></a>00263 
<a name="l00264"></a><a class="code" href="structb43__rxhdr__fw4.html#a25b3c2a4f1d78dbada68f2f2e2f53105">00264</a>                 __le16 <a class="code" href="structb43__rxhdr__fw4.html#a25b3c2a4f1d78dbada68f2f2e2f53105">phy_status2</a>;     <span class="comment">/* PHY RX Status 2 */</span>
<a name="l00265"></a>00265         } <a class="code" href="structb43__rxhdr__fw4.html#a224fa3e6463b11f337ae2e0f1eb46781">__packed</a>;
<a name="l00266"></a>00266         <span class="keyword">union </span>{
<a name="l00267"></a>00267                 <span class="comment">/* HT-PHY */</span>
<a name="l00268"></a>00268                 <span class="keyword">struct </span>{
<a name="l00269"></a><a class="code" href="structb43__rxhdr__fw4.html#abaa5269fd3d754fc6bf77127b9ae062b">00269</a>                         __s8 <a class="code" href="structb43__rxhdr__fw4.html#abaa5269fd3d754fc6bf77127b9ae062b">phy_ht_power1</a>;
<a name="l00270"></a><a class="code" href="structb43__rxhdr__fw4.html#a82c090a2bd8156c2774e13f45d216466">00270</a>                         __s8 <a class="code" href="structb43__rxhdr__fw4.html#a82c090a2bd8156c2774e13f45d216466">phy_ht_power2</a>;
<a name="l00271"></a>00271                 } <a class="code" href="structb43__rxhdr__fw4.html#a224fa3e6463b11f337ae2e0f1eb46781">__packed</a>;
<a name="l00272"></a>00272 
<a name="l00273"></a><a class="code" href="structb43__rxhdr__fw4.html#a62dcefea1ba85beed035c978929ae951">00273</a>                 __le16 <a class="code" href="structb43__rxhdr__fw4.html#a62dcefea1ba85beed035c978929ae951">phy_status3</a>;     <span class="comment">/* PHY RX Status 3 */</span>
<a name="l00274"></a>00274         } <a class="code" href="structb43__rxhdr__fw4.html#a224fa3e6463b11f337ae2e0f1eb46781">__packed</a>;
<a name="l00275"></a>00275         <span class="keyword">union </span>{
<a name="l00276"></a>00276                 <span class="comment">/* Tested with 598.314, 644.1001 and 666.2 */</span>
<a name="l00277"></a>00277                 <span class="keyword">struct </span>{
<a name="l00278"></a><a class="code" href="structb43__rxhdr__fw4.html#a270c67016216879b41a631d724135239">00278</a>                         __le16 <a class="code" href="structb43__rxhdr__fw4.html#a270c67016216879b41a631d724135239">phy_status4</a>;     <span class="comment">/* PHY RX Status 4 */</span>
<a name="l00279"></a><a class="code" href="structb43__rxhdr__fw4.html#a652e74df1946b2e82907215da3bb5199">00279</a>                         __le16 <a class="code" href="structb43__rxhdr__fw4.html#a652e74df1946b2e82907215da3bb5199">phy_status5</a>;     <span class="comment">/* PHY RX Status 5 */</span>
<a name="l00280"></a><a class="code" href="structb43__rxhdr__fw4.html#a8fc1ae40d2bd80a48e9031f041afe40f">00280</a>                         __le32 <a class="code" href="structb43__rxhdr__fw4.html#a8fc1ae40d2bd80a48e9031f041afe40f">mac_status</a>;      <span class="comment">/* MAC RX status */</span>
<a name="l00281"></a><a class="code" href="structb43__rxhdr__fw4.html#a1094da44db7ff0a17592151989cfbaed">00281</a>                         __le16 <a class="code" href="structb43__rxhdr__fw4.html#a1094da44db7ff0a17592151989cfbaed">mac_time</a>;
<a name="l00282"></a><a class="code" href="structb43__rxhdr__fw4.html#a40bfd248de509561265427f864f1a6fd">00282</a>                         __le16 <a class="code" href="structb43__rxhdr__fw4.html#a40bfd248de509561265427f864f1a6fd">channel</a>;
<a name="l00283"></a>00283                 } format_598 <a class="code" href="structb43__rxhdr__fw4.html#a224fa3e6463b11f337ae2e0f1eb46781">__packed</a>;
<a name="l00284"></a>00284 
<a name="l00285"></a>00285                 <span class="comment">/* Tested with 351.126, 410.2160, 478.104 and 508.* */</span>
<a name="l00286"></a>00286                 <span class="keyword">struct </span>{
<a name="l00287"></a>00287                         __le32 <a class="code" href="structb43__rxhdr__fw4.html#a8fc1ae40d2bd80a48e9031f041afe40f">mac_status</a>;      <span class="comment">/* MAC RX status */</span>
<a name="l00288"></a>00288                         __le16 <a class="code" href="structb43__rxhdr__fw4.html#a1094da44db7ff0a17592151989cfbaed">mac_time</a>;
<a name="l00289"></a>00289                         __le16 <a class="code" href="structb43__rxhdr__fw4.html#a40bfd248de509561265427f864f1a6fd">channel</a>;
<a name="l00290"></a>00290                 } format_351 __packed;
<a name="l00291"></a>00291         } <a class="code" href="structb43__rxhdr__fw4.html#a224fa3e6463b11f337ae2e0f1eb46781">__packed</a>;
<a name="l00292"></a>00292 } <a class="code" href="b43_8h.html#aeeac6b9cd8fd9c68189de8cf45630550">__packed</a>;
<a name="l00293"></a>00293 
<a name="l00294"></a>00294 <span class="comment">/* PHY RX Status 0 */</span>
<a name="l00295"></a><a class="code" href="xmit_8h.html#a3b2b6c8af56fce2f4ae90b8197480384">00295</a> <span class="preprocessor">#define B43_RX_PHYST0_GAINCTL           0x4000 </span><span class="comment">/* Gain Control */</span>
<a name="l00296"></a><a class="code" href="xmit_8h.html#a498779a6abfaeb5b20185c1f348517cd">00296</a> <span class="preprocessor">#define B43_RX_PHYST0_PLCPHCF           0x0200</span>
<a name="l00297"></a><a class="code" href="xmit_8h.html#ab4b09b9493b1bfb24756ab1348bee868">00297</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_RX_PHYST0_PLCPFV            0x0100</span>
<a name="l00298"></a><a class="code" href="xmit_8h.html#a28d9d1d69e7848bd11d9691eb9dba9bb">00298</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_RX_PHYST0_SHORTPRMBL        0x0080 </span><span class="comment">/* Received with Short Preamble */</span>
<a name="l00299"></a><a class="code" href="xmit_8h.html#a484d6921fd399853eaeb3e91f2dc735f">00299</a> <span class="preprocessor">#define B43_RX_PHYST0_LCRS              0x0040</span>
<a name="l00300"></a><a class="code" href="xmit_8h.html#a697ac288f3e07c716e41ea5d6a3a05fe">00300</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_RX_PHYST0_ANT               0x0020 </span><span class="comment">/* Antenna */</span>
<a name="l00301"></a><a class="code" href="xmit_8h.html#aee8778e245a857af14658cadeaa908da">00301</a> <span class="preprocessor">#define B43_RX_PHYST0_UNSRATE           0x0010</span>
<a name="l00302"></a><a class="code" href="xmit_8h.html#ae0a01c760c28e6e90ce25b4cd5667903">00302</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_RX_PHYST0_CLIP              0x000C</span>
<a name="l00303"></a><a class="code" href="xmit_8h.html#a38e3614e722657a09cba9702d2c69c67">00303</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_RX_PHYST0_CLIP_SHIFT        2</span>
<a name="l00304"></a><a class="code" href="xmit_8h.html#a2b23414cc7c5d4e37b5f33b93a0276b5">00304</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_RX_PHYST0_FTYPE             0x0003 </span><span class="comment">/* Frame type */</span>
<a name="l00305"></a><a class="code" href="xmit_8h.html#a5f65ea2701889141d96d90f5354c5208">00305</a> <span class="preprocessor">#define  B43_RX_PHYST0_CCK              0x0000 </span><span class="comment">/* Frame type: CCK */</span>
<a name="l00306"></a><a class="code" href="xmit_8h.html#a4945267a533d1c289c7373f206e6fe82">00306</a> <span class="preprocessor">#define  B43_RX_PHYST0_OFDM             0x0001 </span><span class="comment">/* Frame type: OFDM */</span>
<a name="l00307"></a><a class="code" href="xmit_8h.html#a25966ed1adc823c941df3352c7558e26">00307</a> <span class="preprocessor">#define  B43_RX_PHYST0_PRE_N            0x0002 </span><span class="comment">/* Pre-standard N-PHY frame */</span>
<a name="l00308"></a><a class="code" href="xmit_8h.html#a2a0fe254f3f86e74a27af8071bc2c75a">00308</a> <span class="preprocessor">#define  B43_RX_PHYST0_STD_N            0x0003 </span><span class="comment">/* Standard N-PHY frame */</span>
<a name="l00309"></a>00309 
<a name="l00310"></a>00310 <span class="comment">/* PHY RX Status 2 */</span>
<a name="l00311"></a><a class="code" href="xmit_8h.html#aac1570ee3fd0c8ed6f3dd5efbe53ab30">00311</a> <span class="preprocessor">#define B43_RX_PHYST2_LNAG              0xC000 </span><span class="comment">/* LNA Gain */</span>
<a name="l00312"></a><a class="code" href="xmit_8h.html#a5534f0fb97cf8cc2102e8d8cc1a68fcd">00312</a> <span class="preprocessor">#define B43_RX_PHYST2_LNAG_SHIFT        14</span>
<a name="l00313"></a><a class="code" href="xmit_8h.html#a64c4283664e804bc7656914a632f4c3e">00313</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_RX_PHYST2_PNAG              0x3C00 </span><span class="comment">/* PNA Gain */</span>
<a name="l00314"></a><a class="code" href="xmit_8h.html#a76577bc0b5d0e1b799b99d87b96e73ed">00314</a> <span class="preprocessor">#define B43_RX_PHYST2_PNAG_SHIFT        10</span>
<a name="l00315"></a><a class="code" href="xmit_8h.html#a29b2b61fdb44e39d04ddb88e0307f9a6">00315</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_RX_PHYST2_FOFF              0x03FF </span><span class="comment">/* F offset */</span>
<a name="l00316"></a>00316 
<a name="l00317"></a>00317 <span class="comment">/* PHY RX Status 3 */</span>
<a name="l00318"></a><a class="code" href="xmit_8h.html#a2518b607eddb7c9671e29062378078c9">00318</a> <span class="preprocessor">#define B43_RX_PHYST3_DIGG              0x1800 </span><span class="comment">/* DIG Gain */</span>
<a name="l00319"></a><a class="code" href="xmit_8h.html#a5ca21a10d3bce81332109179cb9d939d">00319</a> <span class="preprocessor">#define B43_RX_PHYST3_DIGG_SHIFT        11</span>
<a name="l00320"></a><a class="code" href="xmit_8h.html#a12e7d772a3117bfeee99b32d0f377db9">00320</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_RX_PHYST3_TRSTATE           0x0400 </span><span class="comment">/* TR state */</span>
<a name="l00321"></a>00321 
<a name="l00322"></a>00322 <span class="comment">/* MAC RX Status */</span>
<a name="l00323"></a><a class="code" href="xmit_8h.html#a11306f142b32a1e4da1411ca5b5463e9">00323</a> <span class="preprocessor">#define B43_RX_MAC_RXST_VALID           0x01000000 </span><span class="comment">/* PHY RXST valid */</span>
<a name="l00324"></a><a class="code" href="xmit_8h.html#af8bc153f69929efd9962c524edb572ec">00324</a> <span class="preprocessor">#define B43_RX_MAC_TKIP_MICERR          0x00100000 </span><span class="comment">/* TKIP MIC error */</span>
<a name="l00325"></a><a class="code" href="xmit_8h.html#a3b3f9d8aed7f098dd1893d0ec999e137">00325</a> <span class="preprocessor">#define B43_RX_MAC_TKIP_MICATT          0x00080000 </span><span class="comment">/* TKIP MIC attempted */</span>
<a name="l00326"></a><a class="code" href="xmit_8h.html#a2d6c6024d06cf387e063f9a3eb9b5aac">00326</a> <span class="preprocessor">#define B43_RX_MAC_AGGTYPE              0x00060000 </span><span class="comment">/* Aggregation type */</span>
<a name="l00327"></a><a class="code" href="xmit_8h.html#a1c3f977fc149622f52002bbf6122909d">00327</a> <span class="preprocessor">#define B43_RX_MAC_AGGTYPE_SHIFT        17</span>
<a name="l00328"></a><a class="code" href="xmit_8h.html#a3daf0f0d605d9adcec60f39c07dbc22d">00328</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_RX_MAC_AMSDU                0x00010000 </span><span class="comment">/* A-MSDU mask */</span>
<a name="l00329"></a><a class="code" href="xmit_8h.html#a2c9c5678bc5df1ce1a2ab04ab7fb8b0e">00329</a> <span class="preprocessor">#define B43_RX_MAC_BEACONSENT           0x00008000 </span><span class="comment">/* Beacon sent flag */</span>
<a name="l00330"></a><a class="code" href="xmit_8h.html#ad3cd28df4486b5ce5b3a9c292ac7929d">00330</a> <span class="preprocessor">#define B43_RX_MAC_KEYIDX               0x000007E0 </span><span class="comment">/* Key index */</span>
<a name="l00331"></a><a class="code" href="xmit_8h.html#aad8be3e2f9c67f25f626062638805847">00331</a> <span class="preprocessor">#define B43_RX_MAC_KEYIDX_SHIFT         5</span>
<a name="l00332"></a><a class="code" href="xmit_8h.html#aac21747871dae923a70dbd4abdf338c8">00332</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_RX_MAC_DECERR               0x00000010 </span><span class="comment">/* Decrypt error */</span>
<a name="l00333"></a><a class="code" href="xmit_8h.html#a34e6e0dd01a19b9c004725edc70925fa">00333</a> <span class="preprocessor">#define B43_RX_MAC_DEC                  0x00000008 </span><span class="comment">/* Decryption attempted */</span>
<a name="l00334"></a><a class="code" href="xmit_8h.html#a310243bb215ade299c97ec419f141288">00334</a> <span class="preprocessor">#define B43_RX_MAC_PADDING              0x00000004 </span><span class="comment">/* Pad bytes present */</span>
<a name="l00335"></a><a class="code" href="xmit_8h.html#a3c4ab0e5efb8fca8c3da8c769549a4e3">00335</a> <span class="preprocessor">#define B43_RX_MAC_RESP                 0x00000002 </span><span class="comment">/* Response frame transmitted */</span>
<a name="l00336"></a><a class="code" href="xmit_8h.html#a7729fe9f2c3f8880cd044f6ca5a1b682">00336</a> <span class="preprocessor">#define B43_RX_MAC_FCSERR               0x00000001 </span><span class="comment">/* FCS error */</span>
<a name="l00337"></a>00337 
<a name="l00338"></a>00338 <span class="comment">/* RX channel */</span>
<a name="l00339"></a><a class="code" href="xmit_8h.html#a46c0ab65fe33196cee0e3f5a8bcfd268">00339</a> <span class="preprocessor">#define B43_RX_CHAN_40MHZ               0x1000 </span><span class="comment">/* 40 Mhz channel width */</span>
<a name="l00340"></a><a class="code" href="xmit_8h.html#a7b0d30fc933958c84012544ac07f98bd">00340</a> <span class="preprocessor">#define B43_RX_CHAN_5GHZ                0x0800 </span><span class="comment">/* 5 Ghz band */</span>
<a name="l00341"></a><a class="code" href="xmit_8h.html#a3ce3c48785f573e2a9395233651ed05d">00341</a> <span class="preprocessor">#define B43_RX_CHAN_ID                  0x07F8 </span><span class="comment">/* Channel ID */</span>
<a name="l00342"></a><a class="code" href="xmit_8h.html#aa427212d9d1c5a05f98cc1a7eb17fa2a">00342</a> <span class="preprocessor">#define B43_RX_CHAN_ID_SHIFT            3</span>
<a name="l00343"></a><a class="code" href="xmit_8h.html#a6703598fb337f5f5791ad2834eec92d3">00343</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_RX_CHAN_PHYTYPE             0x0007 </span><span class="comment">/* PHY type */</span>
<a name="l00344"></a>00344 
<a name="l00345"></a>00345 
<a name="l00346"></a>00346 u8 <a class="code" href="xmit_8c.html#a24cc15752ebf2c2a1d794e5edc2747f3">b43_plcp_get_ratecode_cck</a>(<span class="keyword">const</span> u8 bitrate);
<a name="l00347"></a>00347 u8 <a class="code" href="xmit_8c.html#ac51df2daff6dbbaeed19eb9f640a86da">b43_plcp_get_ratecode_ofdm</a>(<span class="keyword">const</span> u8 bitrate);
<a name="l00348"></a>00348 
<a name="l00349"></a>00349 <span class="keywordtype">void</span> <a class="code" href="xmit_8c.html#a771f3bd4a9c50e682e6973b512b87a01">b43_generate_plcp_hdr</a>(<span class="keyword">struct</span> b43_plcp_hdr4 *plcp,
<a name="l00350"></a>00350                            <span class="keyword">const</span> u16 octets, <span class="keyword">const</span> u8 bitrate);
<a name="l00351"></a>00351 
<a name="l00352"></a>00352 <span class="keywordtype">void</span> <a class="code" href="xmit_8c.html#ad857f761fb507d5d5b91bea3e6cff51f">b43_rx</a>(<span class="keyword">struct</span> <a class="code" href="structb43__wldev.html">b43_wldev</a> *dev, <span class="keyword">struct</span> sk_buff *skb, <span class="keyword">const</span> <span class="keywordtype">void</span> *_rxhdr);
<a name="l00353"></a>00353 
<a name="l00354"></a>00354 <span class="keywordtype">void</span> <a class="code" href="xmit_8c.html#af43e642f2b940e542c59f53b6bcf1b75">b43_handle_txstatus</a>(<span class="keyword">struct</span> <a class="code" href="structb43__wldev.html">b43_wldev</a> *dev,
<a name="l00355"></a>00355                          <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structb43__txstatus.html">b43_txstatus</a> *status);
<a name="l00356"></a>00356 <span class="keywordtype">bool</span> <a class="code" href="xmit_8c.html#a09d364e33075dce853a3bede0a204a63">b43_fill_txstatus_report</a>(<span class="keyword">struct</span> <a class="code" href="structb43__wldev.html">b43_wldev</a> *dev,
<a name="l00357"></a>00357                               <span class="keyword">struct</span> ieee80211_tx_info *report,
<a name="l00358"></a>00358                               <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structb43__txstatus.html">b43_txstatus</a> *status);
<a name="l00359"></a>00359 
<a name="l00360"></a>00360 <span class="keywordtype">void</span> <a class="code" href="xmit_8c.html#a589c0348baafd18ea1114464f0084a81">b43_tx_suspend</a>(<span class="keyword">struct</span> <a class="code" href="structb43__wldev.html">b43_wldev</a> *dev);
<a name="l00361"></a>00361 <span class="keywordtype">void</span> <a class="code" href="xmit_8c.html#a0c2eaf8860cd88e5dfc8e3144dcd5079">b43_tx_resume</a>(<span class="keyword">struct</span> <a class="code" href="structb43__wldev.html">b43_wldev</a> *dev);
<a name="l00362"></a>00362 
<a name="l00363"></a>00363 
<a name="l00364"></a>00364 <span class="comment">/* Helper functions for converting the key-table index from &quot;firmware-format&quot;</span>
<a name="l00365"></a>00365 <span class="comment"> * to &quot;raw-format&quot; and back. The firmware API changed for this at some revision.</span>
<a name="l00366"></a>00366 <span class="comment"> * We need to account for that here. */</span>
<a name="l00367"></a><a class="code" href="xmit_8h.html#ac60cfecd9f84a5fa74c67a667b308d85">00367</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="xmit_8h.html#ac60cfecd9f84a5fa74c67a667b308d85">b43_new_kidx_api</a>(<span class="keyword">struct</span> <a class="code" href="structb43__wldev.html">b43_wldev</a> *dev)
<a name="l00368"></a>00368 {
<a name="l00369"></a>00369         <span class="comment">/* FIXME: Not sure the change was at rev 351 */</span>
<a name="l00370"></a>00370         <span class="keywordflow">return</span> (dev-&gt;<a class="code" href="structb43__wldev.html#a2d34947d765ba46b05f5f7fe6186c304">fw</a>.<a class="code" href="structb43__firmware.html#a264b7025f20f82c45fe6f814c65f14ac">rev</a> &gt;= 351);
<a name="l00371"></a>00371 }
<a name="l00372"></a><a class="code" href="xmit_8h.html#a74a3337729e40a1708ac1d72ecef1a59">00372</a> <span class="keyword">static</span> <span class="keyword">inline</span> u8 <a class="code" href="xmit_8h.html#a74a3337729e40a1708ac1d72ecef1a59">b43_kidx_to_fw</a>(<span class="keyword">struct</span> <a class="code" href="structb43__wldev.html">b43_wldev</a> *dev, u8 raw_kidx)
<a name="l00373"></a>00373 {
<a name="l00374"></a>00374         u8 firmware_kidx;
<a name="l00375"></a>00375         <span class="keywordflow">if</span> (<a class="code" href="xmit_8h.html#ac60cfecd9f84a5fa74c67a667b308d85">b43_new_kidx_api</a>(dev)) {
<a name="l00376"></a>00376                 firmware_kidx = raw_kidx;
<a name="l00377"></a>00377         } <span class="keywordflow">else</span> {
<a name="l00378"></a>00378                 <span class="keywordflow">if</span> (raw_kidx &gt;= 4)      <span class="comment">/* Is per STA key? */</span>
<a name="l00379"></a>00379                         firmware_kidx = raw_kidx - 4;
<a name="l00380"></a>00380                 <span class="keywordflow">else</span>
<a name="l00381"></a>00381                         firmware_kidx = raw_kidx;       <span class="comment">/* TX default key */</span>
<a name="l00382"></a>00382         }
<a name="l00383"></a>00383         <span class="keywordflow">return</span> firmware_kidx;
<a name="l00384"></a>00384 }
<a name="l00385"></a><a class="code" href="xmit_8h.html#af6f73d3f8a64f6daa16dcd4c61572452">00385</a> <span class="keyword">static</span> <span class="keyword">inline</span> u8 <a class="code" href="xmit_8h.html#af6f73d3f8a64f6daa16dcd4c61572452">b43_kidx_to_raw</a>(<span class="keyword">struct</span> <a class="code" href="structb43__wldev.html">b43_wldev</a> *dev, u8 firmware_kidx)
<a name="l00386"></a>00386 {
<a name="l00387"></a>00387         u8 raw_kidx;
<a name="l00388"></a>00388         <span class="keywordflow">if</span> (<a class="code" href="xmit_8h.html#ac60cfecd9f84a5fa74c67a667b308d85">b43_new_kidx_api</a>(dev))
<a name="l00389"></a>00389                 raw_kidx = firmware_kidx;
<a name="l00390"></a>00390         <span class="keywordflow">else</span>
<a name="l00391"></a>00391                 raw_kidx = firmware_kidx + 4;   <span class="comment">/* RX default keys or per STA keys */</span>
<a name="l00392"></a>00392         <span class="keywordflow">return</span> raw_kidx;
<a name="l00393"></a>00393 }
<a name="l00394"></a>00394 
<a name="l00395"></a>00395 <span class="comment">/* struct b43_private_tx_info - TX info private to b43.</span>
<a name="l00396"></a>00396 <span class="comment"> * The structure is placed in (struct ieee80211_tx_info *)-&gt;rate_driver_data</span>
<a name="l00397"></a>00397 <span class="comment"> *</span>
<a name="l00398"></a>00398 <span class="comment"> * @bouncebuffer: DMA Bouncebuffer (if used)</span>
<a name="l00399"></a>00399 <span class="comment"> */</span>
<a name="l00400"></a><a class="code" href="structb43__private__tx__info.html">00400</a> <span class="keyword">struct </span><a class="code" href="structb43__private__tx__info.html">b43_private_tx_info</a> {
<a name="l00401"></a><a class="code" href="structb43__private__tx__info.html#a490d944765f7bae64290329fd7135e13">00401</a>         <span class="keywordtype">void</span> *<a class="code" href="structb43__private__tx__info.html#a490d944765f7bae64290329fd7135e13">bouncebuffer</a>;
<a name="l00402"></a>00402 };
<a name="l00403"></a>00403 
<a name="l00404"></a>00404 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structb43__private__tx__info.html">b43_private_tx_info</a> *
<a name="l00405"></a><a class="code" href="xmit_8h.html#ad8e37541141f78894c75c76b6a7428f7">00405</a> <a class="code" href="xmit_8h.html#ad8e37541141f78894c75c76b6a7428f7">b43_get_priv_tx_info</a>(<span class="keyword">struct</span> ieee80211_tx_info *info)
<a name="l00406"></a>00406 {
<a name="l00407"></a>00407         BUILD_BUG_ON(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structb43__private__tx__info.html">b43_private_tx_info</a>) &gt;
<a name="l00408"></a>00408                      <span class="keyword">sizeof</span>(info-&gt;rate_driver_data));
<a name="l00409"></a>00409         <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structb43__private__tx__info.html">b43_private_tx_info</a> *)info-&gt;rate_driver_data;
<a name="l00410"></a>00410 }
<a name="l00411"></a>00411 
<a name="l00412"></a>00412 <span class="preprocessor">#endif </span><span class="comment">/* B43_XMIT_H_ */</span>
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Apr 11 22:05:17 2013 for CompatWireless3.2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
