<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CompatWireless3.2: drivers/net/wireless/b43/dma.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>drivers/net/wireless/b43/dma.h</h1><a href="dma_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef B43_DMA_H_</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA_H_</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &lt;linux/err.h&gt;</span>
<a name="l00005"></a>00005 
<a name="l00006"></a>00006 <span class="preprocessor">#include &quot;<a class="code" href="b43_8h.html">b43.h</a>&quot;</span>
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="comment">/* DMA-Interrupt reasons. */</span>
<a name="l00010"></a><a class="code" href="dma_8h.html#ab2fbfe0f1a750a8e0a9c3a6996956c10">00010</a> <span class="preprocessor">#define B43_DMAIRQ_FATALMASK    ((1 &lt;&lt; 10) | (1 &lt;&lt; 11) | (1 &lt;&lt; 12) \</span>
<a name="l00011"></a>00011 <span class="preprocessor">                                         | (1 &lt;&lt; 14) | (1 &lt;&lt; 15))</span>
<a name="l00012"></a><a class="code" href="dma_8h.html#a6b40cbc1acb48a58ed3ba8c85e230fb6">00012</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMAIRQ_NONFATALMASK (1 &lt;&lt; 13)</span>
<a name="l00013"></a><a class="code" href="dma_8h.html#a688d86ccbf6b3e33f361678f2e82564e">00013</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMAIRQ_RX_DONE              (1 &lt;&lt; 16)</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span>
<a name="l00015"></a>00015 <span class="comment">/*** 32-bit DMA Engine. ***/</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="comment">/* 32-bit DMA controller registers. */</span>
<a name="l00018"></a><a class="code" href="dma_8h.html#a9be305f794a21c70351337521eaa341b">00018</a> <span class="preprocessor">#define B43_DMA32_TXCTL                         0x00</span>
<a name="l00019"></a><a class="code" href="dma_8h.html#ae1a7d75050daec52cd0bea868883e060">00019</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_TXENABLE                      0x00000001</span>
<a name="l00020"></a><a class="code" href="dma_8h.html#a9dd99ccfd2c15201d42440d16b29d4ed">00020</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_TXSUSPEND                     0x00000002</span>
<a name="l00021"></a><a class="code" href="dma_8h.html#a262e2b59ab4509abb78414f6b2abccf7">00021</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_TXLOOPBACK            0x00000004</span>
<a name="l00022"></a><a class="code" href="dma_8h.html#ad2683ff9786373851859bdacc4766d1d">00022</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_TXFLUSH                       0x00000010</span>
<a name="l00023"></a><a class="code" href="dma_8h.html#ad9791c2125dd19c1c8ecddaadf0fd95b">00023</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_TXPARITYDISABLE               0x00000800</span>
<a name="l00024"></a><a class="code" href="dma_8h.html#a7e1f2d22fe4563765e07f09c1d9d5491">00024</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_TXADDREXT_MASK                0x00030000</span>
<a name="l00025"></a><a class="code" href="dma_8h.html#a408b04d112889c7fd65e714860242061">00025</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_TXADDREXT_SHIFT               16</span>
<a name="l00026"></a><a class="code" href="dma_8h.html#ab88f2b2491720076dc722f0343916e9c">00026</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA32_TXRING                                0x04</span>
<a name="l00027"></a><a class="code" href="dma_8h.html#a719517a66f00f178271a97e1a17e7862">00027</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA32_TXINDEX                               0x08</span>
<a name="l00028"></a><a class="code" href="dma_8h.html#aa4e2a7a1dc1e1837ee38b89fc6c5e364">00028</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA32_TXSTATUS                              0x0C</span>
<a name="l00029"></a><a class="code" href="dma_8h.html#a6a7c0f1a6821f6ebd2dd63aa21376ee5">00029</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_TXDPTR                        0x00000FFF</span>
<a name="l00030"></a><a class="code" href="dma_8h.html#ad8fbc756e4122785102853122c1cf718">00030</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_TXSTATE                       0x0000F000</span>
<a name="l00031"></a><a class="code" href="dma_8h.html#a9c495bb2ca444d6ff2c4980bc23bdf3a">00031</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA32_TXSTAT_DISABLED       0x00000000</span>
<a name="l00032"></a><a class="code" href="dma_8h.html#aac541ff464e37759f783f52e8ef8775b">00032</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA32_TXSTAT_ACTIVE 0x00001000</span>
<a name="l00033"></a><a class="code" href="dma_8h.html#a2f5ae2f798437d4748349e6066d6fa77">00033</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA32_TXSTAT_IDLEWAIT       0x00002000</span>
<a name="l00034"></a><a class="code" href="dma_8h.html#ac77c7ae3d30981eeedc38e650b7e38ad">00034</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA32_TXSTAT_STOPPED        0x00003000</span>
<a name="l00035"></a><a class="code" href="dma_8h.html#a41b9b0f9f271fea52178cdc59e143f87">00035</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA32_TXSTAT_SUSP   0x00004000</span>
<a name="l00036"></a><a class="code" href="dma_8h.html#a4fc70c3334515a0bc825af44b5b85830">00036</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_TXERROR                       0x000F0000</span>
<a name="l00037"></a><a class="code" href="dma_8h.html#a9e1ee1a226a1a5e6c1426526d4c1304c">00037</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA32_TXERR_NOERR   0x00000000</span>
<a name="l00038"></a><a class="code" href="dma_8h.html#a9af479851a58a1582fc04947d4f68e05">00038</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA32_TXERR_PROT    0x00010000</span>
<a name="l00039"></a><a class="code" href="dma_8h.html#a662e36a32aa75890f1949dab11533fdf">00039</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA32_TXERR_UNDERRUN        0x00020000</span>
<a name="l00040"></a><a class="code" href="dma_8h.html#a1cbef89985d2cc265fb68953e0cd9b1a">00040</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA32_TXERR_BUFREAD 0x00030000</span>
<a name="l00041"></a><a class="code" href="dma_8h.html#a18fc079f328cb5fdc5693b4d1ec59101">00041</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA32_TXERR_DESCREAD        0x00040000</span>
<a name="l00042"></a><a class="code" href="dma_8h.html#ab20c4debe621d33c66bc68f0f01b95c8">00042</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_TXACTIVE                      0xFFF00000</span>
<a name="l00043"></a><a class="code" href="dma_8h.html#aa1187a9ea82d2e14f1a9ffa447c202f5">00043</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA32_RXCTL                         0x10</span>
<a name="l00044"></a><a class="code" href="dma_8h.html#a260338ed95e879d044c23702f895bdf6">00044</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_RXENABLE                      0x00000001</span>
<a name="l00045"></a><a class="code" href="dma_8h.html#a4fc5bd71fb9cc68b200b6746a402d370">00045</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_RXFROFF_MASK          0x000000FE</span>
<a name="l00046"></a><a class="code" href="dma_8h.html#adade3eca72be6266c42bbcbc557ccf14">00046</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_RXFROFF_SHIFT         1</span>
<a name="l00047"></a><a class="code" href="dma_8h.html#ae9ae0a830290843ff9221e7bc28ad4e6">00047</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_RXDIRECTFIFO          0x00000100</span>
<a name="l00048"></a><a class="code" href="dma_8h.html#a1408748b9c2d8ae13a63c05c6ee27ed3">00048</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_RXPARITYDISABLE               0x00000800</span>
<a name="l00049"></a><a class="code" href="dma_8h.html#a2d05ed1fdf7359131aec70ecc26cef8a">00049</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_RXADDREXT_MASK                0x00030000</span>
<a name="l00050"></a><a class="code" href="dma_8h.html#aafe5d37d6af1aa6df41b1d16707663ed">00050</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_RXADDREXT_SHIFT               16</span>
<a name="l00051"></a><a class="code" href="dma_8h.html#ade6c9c141e2d207483ca4bb4f14cf4fc">00051</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA32_RXRING                                0x14</span>
<a name="l00052"></a><a class="code" href="dma_8h.html#acd2e39bfe04b54e28380c7a3899ab808">00052</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA32_RXINDEX                               0x18</span>
<a name="l00053"></a><a class="code" href="dma_8h.html#aa4db368b0a9e37da66e9437ba388b2a4">00053</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA32_RXSTATUS                              0x1C</span>
<a name="l00054"></a><a class="code" href="dma_8h.html#a84527c926cd4d95fe5d755749d57650d">00054</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_RXDPTR                        0x00000FFF</span>
<a name="l00055"></a><a class="code" href="dma_8h.html#abf4f84ed72aabce9b7e964d96e3b818c">00055</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_RXSTATE                       0x0000F000</span>
<a name="l00056"></a><a class="code" href="dma_8h.html#a4f37d0311be57f5a7cb1699747a2662b">00056</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA32_RXSTAT_DISABLED       0x00000000</span>
<a name="l00057"></a><a class="code" href="dma_8h.html#a0d78cae98851d7241fe72f849f7ca66c">00057</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA32_RXSTAT_ACTIVE 0x00001000</span>
<a name="l00058"></a><a class="code" href="dma_8h.html#a55cb605042843f289fd1a339753a4dd5">00058</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA32_RXSTAT_IDLEWAIT       0x00002000</span>
<a name="l00059"></a><a class="code" href="dma_8h.html#abd2da46b35c392dbb98e39a3f945ae8c">00059</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA32_RXSTAT_STOPPED        0x00003000</span>
<a name="l00060"></a><a class="code" href="dma_8h.html#a6cc970a54c462a905cedee3e5ad06b11">00060</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_RXERROR                       0x000F0000</span>
<a name="l00061"></a><a class="code" href="dma_8h.html#a76aef888327477a691357f0b7505de99">00061</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA32_RXERR_NOERR   0x00000000</span>
<a name="l00062"></a><a class="code" href="dma_8h.html#aa2d2721a52104f162716a7360c6afef0">00062</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA32_RXERR_PROT    0x00010000</span>
<a name="l00063"></a><a class="code" href="dma_8h.html#a282a63206501294d58c65fd2684c31c1">00063</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA32_RXERR_OVERFLOW        0x00020000</span>
<a name="l00064"></a><a class="code" href="dma_8h.html#a9785e23e19fb95fda50496df2a0c811e">00064</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA32_RXERR_BUFWRITE        0x00030000</span>
<a name="l00065"></a><a class="code" href="dma_8h.html#a27de995ca47b3555e5b3e250728b72cf">00065</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA32_RXERR_DESCREAD        0x00040000</span>
<a name="l00066"></a><a class="code" href="dma_8h.html#ac7fe996ce8ebe1407ec8e2599ee919d0">00066</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA32_RXACTIVE                      0xFFF00000</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span>
<a name="l00068"></a>00068 <span class="comment">/* 32-bit DMA descriptor. */</span>
<a name="l00069"></a><a class="code" href="structb43__dmadesc32.html">00069</a> <span class="keyword">struct </span><a class="code" href="structb43__dmadesc32.html">b43_dmadesc32</a> {
<a name="l00070"></a><a class="code" href="structb43__dmadesc32.html#a47c79b5cb1596724603f65e9dd575fea">00070</a>         __le32 <a class="code" href="structb43__dmadesc32.html#a47c79b5cb1596724603f65e9dd575fea">control</a>;
<a name="l00071"></a><a class="code" href="structb43__dmadesc32.html#a07a8f1085c304d061b8178fece0c9451">00071</a>         __le32 <a class="code" href="structb43__dmadesc32.html#a07a8f1085c304d061b8178fece0c9451">address</a>;
<a name="l00072"></a>00072 } <a class="code" href="b43_8h.html#aeeac6b9cd8fd9c68189de8cf45630550">__packed</a>;
<a name="l00073"></a><a class="code" href="dma_8h.html#a097f954511978c9d263d9f3799d3b171">00073</a> <span class="preprocessor">#define B43_DMA32_DCTL_BYTECNT          0x00001FFF</span>
<a name="l00074"></a><a class="code" href="dma_8h.html#a067933103783bebe85332db9118c2911">00074</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA32_DCTL_ADDREXT_MASK             0x00030000</span>
<a name="l00075"></a><a class="code" href="dma_8h.html#a9de530b703a7bfee1ab69fdf04d310d8">00075</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA32_DCTL_ADDREXT_SHIFT    16</span>
<a name="l00076"></a><a class="code" href="dma_8h.html#ac4303378a36768055cb16dfa38f7cd09">00076</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA32_DCTL_DTABLEEND                0x10000000</span>
<a name="l00077"></a><a class="code" href="dma_8h.html#adac964b3690bfa9020ac27b2868da994">00077</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA32_DCTL_IRQ                      0x20000000</span>
<a name="l00078"></a><a class="code" href="dma_8h.html#a9c35dd106f640f0327f9fd88a199686b">00078</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA32_DCTL_FRAMEEND         0x40000000</span>
<a name="l00079"></a><a class="code" href="dma_8h.html#ab40c1385b643252192d84cacb6298978">00079</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA32_DCTL_FRAMESTART               0x80000000</span>
<a name="l00080"></a>00080 <span class="preprocessor"></span>
<a name="l00081"></a>00081 <span class="comment">/*** 64-bit DMA Engine. ***/</span>
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 <span class="comment">/* 64-bit DMA controller registers. */</span>
<a name="l00084"></a><a class="code" href="dma_8h.html#a1f8f91960fff44334eaa38062b04f395">00084</a> <span class="preprocessor">#define B43_DMA64_TXCTL                         0x00</span>
<a name="l00085"></a><a class="code" href="dma_8h.html#a1f0c3ce269bd1eaf10f70ffae663d636">00085</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_TXENABLE                      0x00000001</span>
<a name="l00086"></a><a class="code" href="dma_8h.html#a9343f3be266e0bdfe3306657c5356a9a">00086</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_TXSUSPEND                     0x00000002</span>
<a name="l00087"></a><a class="code" href="dma_8h.html#abb9b640f42f06cd32bdc09bd81f4a3a1">00087</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_TXLOOPBACK            0x00000004</span>
<a name="l00088"></a><a class="code" href="dma_8h.html#a1aa7962ec079cf44c828277ec58c3375">00088</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_TXFLUSH                       0x00000010</span>
<a name="l00089"></a><a class="code" href="dma_8h.html#a23dc0fcc37e4f6015d695d0eb1ddc06b">00089</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_TXPARITYDISABLE               0x00000800</span>
<a name="l00090"></a><a class="code" href="dma_8h.html#a39d8f70a83922b96da5010685852705f">00090</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_TXADDREXT_MASK                0x00030000</span>
<a name="l00091"></a><a class="code" href="dma_8h.html#a1f848dfa95e6936784a56fd63652fde0">00091</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_TXADDREXT_SHIFT               16</span>
<a name="l00092"></a><a class="code" href="dma_8h.html#a833bd1d2d2a21fab5220f43a3c80b6e9">00092</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA64_TXINDEX                               0x04</span>
<a name="l00093"></a><a class="code" href="dma_8h.html#a0905854731731005629b2aeb76d8a03d">00093</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA64_TXRINGLO                              0x08</span>
<a name="l00094"></a><a class="code" href="dma_8h.html#a505ae9bc05665e2aad1be8eebea2377f">00094</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA64_TXRINGHI                              0x0C</span>
<a name="l00095"></a><a class="code" href="dma_8h.html#ad02c45c3e7206ff7aa226383ea7d9a8f">00095</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA64_TXSTATUS                              0x10</span>
<a name="l00096"></a><a class="code" href="dma_8h.html#a81205f5f326bb7c3f03a89a3431266e6">00096</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_TXSTATDPTR            0x00001FFF</span>
<a name="l00097"></a><a class="code" href="dma_8h.html#a56b14622c52908e6106d9d1b7cc6d68e">00097</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_TXSTAT                        0xF0000000</span>
<a name="l00098"></a><a class="code" href="dma_8h.html#ac6c723e21565d0f8fe2649f779514f0e">00098</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_TXSTAT_DISABLED       0x00000000</span>
<a name="l00099"></a><a class="code" href="dma_8h.html#a68e37e1bd41ec1ae48810867e560b888">00099</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_TXSTAT_ACTIVE 0x10000000</span>
<a name="l00100"></a><a class="code" href="dma_8h.html#ad9f93ae51b472082b139db1de9d2fb36">00100</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_TXSTAT_IDLEWAIT       0x20000000</span>
<a name="l00101"></a><a class="code" href="dma_8h.html#aa42f5cb0c3f19b4c837b4a510d04f79e">00101</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_TXSTAT_STOPPED        0x30000000</span>
<a name="l00102"></a><a class="code" href="dma_8h.html#a28c0f668727e35c37cdcdc3d21f281e6">00102</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_TXSTAT_SUSP   0x40000000</span>
<a name="l00103"></a><a class="code" href="dma_8h.html#adc630e9f95b9cfc6bc33c19443aa0313">00103</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA64_TXERROR                               0x14</span>
<a name="l00104"></a><a class="code" href="dma_8h.html#a0310368b97a7537cade0f198d6885680">00104</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_TXERRDPTR                     0x0001FFFF</span>
<a name="l00105"></a><a class="code" href="dma_8h.html#a72dab39d2c0355499eac04fd3df614f4">00105</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_TXERR                 0xF0000000</span>
<a name="l00106"></a><a class="code" href="dma_8h.html#a6e40ac6280cc057428086f18e53404f6">00106</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_TXERR_NOERR   0x00000000</span>
<a name="l00107"></a><a class="code" href="dma_8h.html#a99f9074fd5c6078deb3231e9c171715d">00107</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_TXERR_PROT    0x10000000</span>
<a name="l00108"></a><a class="code" href="dma_8h.html#a418b41885aa663d7bc0d44d067d77957">00108</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_TXERR_UNDERRUN        0x20000000</span>
<a name="l00109"></a><a class="code" href="dma_8h.html#ab5d01dcd6c928051f2a59af7de272361">00109</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_TXERR_TRANSFER        0x30000000</span>
<a name="l00110"></a><a class="code" href="dma_8h.html#ac74ce3f277ea469bf9db5b017f7efbc6">00110</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_TXERR_DESCREAD        0x40000000</span>
<a name="l00111"></a><a class="code" href="dma_8h.html#a221de56e227d7e35d296e5390d6af5b7">00111</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_TXERR_CORE    0x50000000</span>
<a name="l00112"></a><a class="code" href="dma_8h.html#a49b596b0ec9e6986415411924cf52e8d">00112</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA64_RXCTL                         0x20</span>
<a name="l00113"></a><a class="code" href="dma_8h.html#a95bb4a263cd4eb58a087037add3973c1">00113</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_RXENABLE                      0x00000001</span>
<a name="l00114"></a><a class="code" href="dma_8h.html#a9954ac6cdc931520451baff11ded24bb">00114</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_RXFROFF_MASK          0x000000FE</span>
<a name="l00115"></a><a class="code" href="dma_8h.html#ab22f9e6d10103a81836495aa898cbeb0">00115</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_RXFROFF_SHIFT         1</span>
<a name="l00116"></a><a class="code" href="dma_8h.html#ac4fe763ccfaf4b28285fba1dc22081a3">00116</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_RXDIRECTFIFO          0x00000100</span>
<a name="l00117"></a><a class="code" href="dma_8h.html#a1a3b55a5f45fa4eb9ee71ca6059ba5d5">00117</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_RXPARITYDISABLE               0x00000800</span>
<a name="l00118"></a><a class="code" href="dma_8h.html#adff24f7b6bc936bee836a1ca00644669">00118</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_RXADDREXT_MASK                0x00030000</span>
<a name="l00119"></a><a class="code" href="dma_8h.html#a06e2f36f233d552b72fef440f795781a">00119</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_RXADDREXT_SHIFT               16</span>
<a name="l00120"></a><a class="code" href="dma_8h.html#ad4cb37f07097fe0182ea81c1354b5c9f">00120</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA64_RXINDEX                               0x24</span>
<a name="l00121"></a><a class="code" href="dma_8h.html#a06a58bdd2dc5326ac2a58e8f8e21c526">00121</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA64_RXRINGLO                              0x28</span>
<a name="l00122"></a><a class="code" href="dma_8h.html#a1ace9256fe47358026001e24e9f406db">00122</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA64_RXRINGHI                              0x2C</span>
<a name="l00123"></a><a class="code" href="dma_8h.html#a6177c290e60200717890d4347c5c5283">00123</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA64_RXSTATUS                              0x30</span>
<a name="l00124"></a><a class="code" href="dma_8h.html#ab65f076eda6503ebfcf5c408fcdc6c24">00124</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_RXSTATDPTR            0x00001FFF</span>
<a name="l00125"></a><a class="code" href="dma_8h.html#a7a5464d47113c10422ea35bf144e3411">00125</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_RXSTAT                        0xF0000000</span>
<a name="l00126"></a><a class="code" href="dma_8h.html#a344db354f722eaf08bb6799928fe949c">00126</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_RXSTAT_DISABLED       0x00000000</span>
<a name="l00127"></a><a class="code" href="dma_8h.html#a238a1227abe3e58267d4aa5eface474e">00127</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_RXSTAT_ACTIVE 0x10000000</span>
<a name="l00128"></a><a class="code" href="dma_8h.html#a9606d7b8132a0b212f7abe2b394e10f0">00128</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_RXSTAT_IDLEWAIT       0x20000000</span>
<a name="l00129"></a><a class="code" href="dma_8h.html#a4c08fcdf01fbc3115a801e121163cbae">00129</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_RXSTAT_STOPPED        0x30000000</span>
<a name="l00130"></a><a class="code" href="dma_8h.html#a85dc479c08d54eab9c1fc3e8fd4436a5">00130</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_RXSTAT_SUSP   0x40000000</span>
<a name="l00131"></a><a class="code" href="dma_8h.html#a41b1a5356c801220844373f62fc5cef8">00131</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA64_RXERROR                               0x34</span>
<a name="l00132"></a><a class="code" href="dma_8h.html#ab9272a019f1512df0b0f7387a6e7575d">00132</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_RXERRDPTR                     0x0001FFFF</span>
<a name="l00133"></a><a class="code" href="dma_8h.html#aa286a898812c79ca68167f601a618496">00133</a> <span class="preprocessor"></span><span class="preprocessor">#define         B43_DMA64_RXERR                 0xF0000000</span>
<a name="l00134"></a><a class="code" href="dma_8h.html#ad7939aee4d7ae3d1df13085c7ffa54ca">00134</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_RXERR_NOERR   0x00000000</span>
<a name="l00135"></a><a class="code" href="dma_8h.html#ae4e7ca543cdd6ea30986baf0dfff6b69">00135</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_RXERR_PROT    0x10000000</span>
<a name="l00136"></a><a class="code" href="dma_8h.html#a543c95cb6f17602e7be7be4e3c10cbbf">00136</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_RXERR_UNDERRUN        0x20000000</span>
<a name="l00137"></a><a class="code" href="dma_8h.html#ac517e32cf41a77b0a550fa1157ec10b3">00137</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_RXERR_TRANSFER        0x30000000</span>
<a name="l00138"></a><a class="code" href="dma_8h.html#a132cac4e345993043e07fd10cb459068">00138</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_RXERR_DESCREAD        0x40000000</span>
<a name="l00139"></a><a class="code" href="dma_8h.html#a0e0c39930420fcb398b4232c9bab7b5f">00139</a> <span class="preprocessor"></span><span class="preprocessor">#define                 B43_DMA64_RXERR_CORE    0x50000000</span>
<a name="l00140"></a>00140 <span class="preprocessor"></span>
<a name="l00141"></a>00141 <span class="comment">/* 64-bit DMA descriptor. */</span>
<a name="l00142"></a><a class="code" href="structb43__dmadesc64.html">00142</a> <span class="keyword">struct </span><a class="code" href="structb43__dmadesc64.html">b43_dmadesc64</a> {
<a name="l00143"></a><a class="code" href="structb43__dmadesc64.html#ae1ec5dcb495a3bc199aa0c3cfc273ac7">00143</a>         __le32 <a class="code" href="structb43__dmadesc64.html#ae1ec5dcb495a3bc199aa0c3cfc273ac7">control0</a>;
<a name="l00144"></a><a class="code" href="structb43__dmadesc64.html#a90d8cd5705f269d987fbfaf1d4c41ee7">00144</a>         __le32 <a class="code" href="structb43__dmadesc64.html#a90d8cd5705f269d987fbfaf1d4c41ee7">control1</a>;
<a name="l00145"></a><a class="code" href="structb43__dmadesc64.html#a3a250eb44a69f64b3aa69967aed09850">00145</a>         __le32 <a class="code" href="structb43__dmadesc64.html#a3a250eb44a69f64b3aa69967aed09850">address_low</a>;
<a name="l00146"></a><a class="code" href="structb43__dmadesc64.html#adefa2a966dccd0ccd51d1ef99dbab849">00146</a>         __le32 <a class="code" href="structb43__dmadesc64.html#adefa2a966dccd0ccd51d1ef99dbab849">address_high</a>;
<a name="l00147"></a>00147 } <a class="code" href="b43_8h.html#aeeac6b9cd8fd9c68189de8cf45630550">__packed</a>;
<a name="l00148"></a><a class="code" href="dma_8h.html#a5a00dd17b8453d0a5e6362ceab124e0d">00148</a> <span class="preprocessor">#define B43_DMA64_DCTL0_DTABLEEND               0x10000000</span>
<a name="l00149"></a><a class="code" href="dma_8h.html#a0eda3f108983329739fa91f0322963fc">00149</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA64_DCTL0_IRQ                     0x20000000</span>
<a name="l00150"></a><a class="code" href="dma_8h.html#a93f6286adbf2bb88b88fa82a8c8ebf54">00150</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA64_DCTL0_FRAMEEND                0x40000000</span>
<a name="l00151"></a><a class="code" href="dma_8h.html#ac10c6f392434006861afbcc466ff4ea9">00151</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA64_DCTL0_FRAMESTART              0x80000000</span>
<a name="l00152"></a><a class="code" href="dma_8h.html#adaa9573cec238b8225953f4302d61131">00152</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA64_DCTL1_BYTECNT         0x00001FFF</span>
<a name="l00153"></a><a class="code" href="dma_8h.html#a70fb00ba5333840b89d99439308f28a3">00153</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA64_DCTL1_ADDREXT_MASK    0x00030000</span>
<a name="l00154"></a><a class="code" href="dma_8h.html#acd1cbed37dd091de9b263636ea479021">00154</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA64_DCTL1_ADDREXT_SHIFT   16</span>
<a name="l00155"></a>00155 <span class="preprocessor"></span>
<a name="l00156"></a><a class="code" href="structb43__dmadesc__generic.html">00156</a> <span class="keyword">struct </span><a class="code" href="structb43__dmadesc__generic.html">b43_dmadesc_generic</a> {
<a name="l00157"></a>00157         <span class="keyword">union </span>{
<a name="l00158"></a><a class="code" href="structb43__dmadesc__generic.html#a787ac131977de43fdba515a3db1c778c">00158</a>                 <span class="keyword">struct </span><a class="code" href="structb43__dmadesc32.html">b43_dmadesc32</a> <a class="code" href="structb43__dmadesc__generic.html#a787ac131977de43fdba515a3db1c778c">dma32</a>;
<a name="l00159"></a><a class="code" href="structb43__dmadesc__generic.html#a8183e9c644a1ed6405a4c04d5371c4f8">00159</a>                 <span class="keyword">struct </span><a class="code" href="structb43__dmadesc64.html">b43_dmadesc64</a> <a class="code" href="structb43__dmadesc__generic.html#a8183e9c644a1ed6405a4c04d5371c4f8">dma64</a>;
<a name="l00160"></a>00160         } <a class="code" href="structb43__dmadesc__generic.html#a009776b8d1d9e608e067073abcb6f0a1">__packed</a>;
<a name="l00161"></a>00161 } <a class="code" href="b43_8h.html#aeeac6b9cd8fd9c68189de8cf45630550">__packed</a>;
<a name="l00162"></a>00162 
<a name="l00163"></a>00163 <span class="comment">/* Misc DMA constants */</span>
<a name="l00164"></a><a class="code" href="dma_8h.html#a45cdb94b295a5ae99e129dc35aa9f17b">00164</a> <span class="preprocessor">#define B43_DMA32_RINGMEMSIZE           4096</span>
<a name="l00165"></a><a class="code" href="dma_8h.html#aa705dd76c3f9a7f10826f821de6e91c2">00165</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA64_RINGMEMSIZE           8192</span>
<a name="l00166"></a>00166 <span class="preprocessor"></span><span class="comment">/* Offset of frame with actual data */</span>
<a name="l00167"></a><a class="code" href="dma_8h.html#ae1828c6e13443d45e4771006186da08b">00167</a> <span class="preprocessor">#define B43_DMA0_RX_FW598_FO            38</span>
<a name="l00168"></a><a class="code" href="dma_8h.html#acd7ef9c60abd6f8021b74ae730e2fefc">00168</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA0_RX_FW351_FO            30</span>
<a name="l00169"></a>00169 <span class="preprocessor"></span>
<a name="l00170"></a>00170 <span class="comment">/* DMA engine tuning knobs */</span>
<a name="l00171"></a><a class="code" href="dma_8h.html#a01f24c77993b12c0088cfada567aa093">00171</a> <span class="preprocessor">#define B43_TXRING_SLOTS                256</span>
<a name="l00172"></a><a class="code" href="dma_8h.html#ac83ca282a61294c34ba08d359c2fa7fe">00172</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_RXRING_SLOTS                64</span>
<a name="l00173"></a><a class="code" href="dma_8h.html#a88461ae6043bdd5a03871574fff9200f">00173</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA0_RX_FW598_BUFSIZE       (B43_DMA0_RX_FW598_FO + IEEE80211_MAX_FRAME_LEN)</span>
<a name="l00174"></a><a class="code" href="dma_8h.html#a46b0590b16010f99ee7956f43a7968f3">00174</a> <span class="preprocessor"></span><span class="preprocessor">#define B43_DMA0_RX_FW351_BUFSIZE       (B43_DMA0_RX_FW351_FO + IEEE80211_MAX_FRAME_LEN)</span>
<a name="l00175"></a>00175 <span class="preprocessor"></span>
<a name="l00176"></a>00176 <span class="comment">/* Pointer poison */</span>
<a name="l00177"></a><a class="code" href="dma_8h.html#a866b5248cc236214f342d86e7eec61b3">00177</a> <span class="preprocessor">#define B43_DMA_PTR_POISON              ((void *)ERR_PTR(-ENOMEM))</span>
<a name="l00178"></a><a class="code" href="dma_8h.html#a1b62c91feaf45147df0ee35d071c45fd">00178</a> <span class="preprocessor"></span><span class="preprocessor">#define b43_dma_ptr_is_poisoned(ptr)    (unlikely((ptr) == B43_DMA_PTR_POISON))</span>
<a name="l00179"></a>00179 <span class="preprocessor"></span>
<a name="l00180"></a>00180 
<a name="l00181"></a>00181 <span class="keyword">struct </span>sk_buff;
<a name="l00182"></a>00182 <span class="keyword">struct </span>b43_private;
<a name="l00183"></a>00183 <span class="keyword">struct </span><a class="code" href="structb43__txstatus.html">b43_txstatus</a>;
<a name="l00184"></a>00184 
<a name="l00185"></a><a class="code" href="structb43__dmadesc__meta.html">00185</a> <span class="keyword">struct </span><a class="code" href="structb43__dmadesc__meta.html">b43_dmadesc_meta</a> {
<a name="l00186"></a>00186         <span class="comment">/* The kernel DMA-able buffer. */</span>
<a name="l00187"></a><a class="code" href="structb43__dmadesc__meta.html#a722746e61f703dc2f03ac129d21a4bdd">00187</a>         <span class="keyword">struct </span>sk_buff *<a class="code" href="structb43__dmadesc__meta.html#a722746e61f703dc2f03ac129d21a4bdd">skb</a>;
<a name="l00188"></a>00188         <span class="comment">/* DMA base bus-address of the descriptor buffer. */</span>
<a name="l00189"></a><a class="code" href="structb43__dmadesc__meta.html#a3c6982ca9c434a27ffab20ab5edab99d">00189</a>         dma_addr_t <a class="code" href="structb43__dmadesc__meta.html#a3c6982ca9c434a27ffab20ab5edab99d">dmaaddr</a>;
<a name="l00190"></a>00190         <span class="comment">/* ieee80211 TX status. Only used once per 802.11 frag. */</span>
<a name="l00191"></a><a class="code" href="structb43__dmadesc__meta.html#a4936fdec25a1826a8906538737f4c533">00191</a>         <span class="keywordtype">bool</span> <a class="code" href="structb43__dmadesc__meta.html#a4936fdec25a1826a8906538737f4c533">is_last_fragment</a>;
<a name="l00192"></a>00192 };
<a name="l00193"></a>00193 
<a name="l00194"></a>00194 <span class="keyword">struct </span><a class="code" href="structb43__dmaring.html">b43_dmaring</a>;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 <span class="comment">/* Lowlevel DMA operations that differ between 32bit and 64bit DMA. */</span>
<a name="l00197"></a><a class="code" href="structb43__dma__ops.html">00197</a> <span class="keyword">struct </span><a class="code" href="structb43__dma__ops.html">b43_dma_ops</a> {
<a name="l00198"></a><a class="code" href="structb43__dma__ops.html#af5f78f80282319e6f301767b2862b6f9">00198</a>         <span class="keyword">struct </span><a class="code" href="structb43__dmadesc__generic.html">b43_dmadesc_generic</a> *(*idx2desc) (<span class="keyword">struct </span><a class="code" href="structb43__dmaring.html">b43_dmaring</a> * ring,
<a name="l00199"></a>00199                                                  <span class="keywordtype">int</span> slot,
<a name="l00200"></a>00200                                                  <span class="keyword">struct </span><a class="code" href="structb43__dmadesc__meta.html">b43_dmadesc_meta</a> **
<a name="l00201"></a>00201                                                  meta);
<a name="l00202"></a><a class="code" href="structb43__dma__ops.html#a38f103b9323304731a220748ec5713e8">00202</a>         void (*<a class="code" href="structb43__dma__ops.html#a38f103b9323304731a220748ec5713e8">fill_descriptor</a>) (<span class="keyword">struct </span><a class="code" href="structb43__dmaring.html">b43_dmaring</a> * ring,
<a name="l00203"></a>00203                                  <span class="keyword">struct </span><a class="code" href="structb43__dmadesc__generic.html">b43_dmadesc_generic</a> * desc,
<a name="l00204"></a>00204                                  dma_addr_t dmaaddr, u16 bufsize, <span class="keywordtype">int</span> start,
<a name="l00205"></a>00205                                  <span class="keywordtype">int</span> end, <span class="keywordtype">int</span> irq);
<a name="l00206"></a><a class="code" href="structb43__dma__ops.html#a1a9401cd26a9fed3f7b57b2da1920a09">00206</a>         void (*<a class="code" href="structb43__dma__ops.html#a1a9401cd26a9fed3f7b57b2da1920a09">poke_tx</a>) (<span class="keyword">struct </span><a class="code" href="structb43__dmaring.html">b43_dmaring</a> * ring, <span class="keywordtype">int</span> slot);
<a name="l00207"></a><a class="code" href="structb43__dma__ops.html#ada7aad2c8598bc8e02321f03dd79076e">00207</a>         void (*<a class="code" href="structb43__dma__ops.html#ada7aad2c8598bc8e02321f03dd79076e">tx_suspend</a>) (<span class="keyword">struct </span><a class="code" href="structb43__dmaring.html">b43_dmaring</a> * ring);
<a name="l00208"></a><a class="code" href="structb43__dma__ops.html#ae2928e7e2f11f3ee2faa24018069f9ee">00208</a>         void (*<a class="code" href="structb43__dma__ops.html#ae2928e7e2f11f3ee2faa24018069f9ee">tx_resume</a>) (<span class="keyword">struct </span><a class="code" href="structb43__dmaring.html">b43_dmaring</a> * ring);
<a name="l00209"></a><a class="code" href="structb43__dma__ops.html#ada696b335b164887308900f104d84123">00209</a>         int (*<a class="code" href="structb43__dma__ops.html#ada696b335b164887308900f104d84123">get_current_rxslot</a>) (<span class="keyword">struct </span><a class="code" href="structb43__dmaring.html">b43_dmaring</a> * ring);
<a name="l00210"></a><a class="code" href="structb43__dma__ops.html#a4a10dc5317ad8e701b57de4038aa147d">00210</a>         void (*<a class="code" href="structb43__dma__ops.html#a4a10dc5317ad8e701b57de4038aa147d">set_current_rxslot</a>) (<span class="keyword">struct </span><a class="code" href="structb43__dmaring.html">b43_dmaring</a> * ring, <span class="keywordtype">int</span> slot);
<a name="l00211"></a>00211 };
<a name="l00212"></a>00212 
<a name="l00213"></a><a class="code" href="dma_8h.html#ae1cb884150a12334ea3bf1898ffbc59c">00213</a> <span class="keyword">enum</span> <a class="code" href="dma_8h.html#ae1cb884150a12334ea3bf1898ffbc59c">b43_dmatype</a> {
<a name="l00214"></a><a class="code" href="dma_8h.html#ae1cb884150a12334ea3bf1898ffbc59caf92347fdb0b58a151da4ba9b7a403d27">00214</a>         <a class="code" href="dma_8h.html#ae1cb884150a12334ea3bf1898ffbc59caf92347fdb0b58a151da4ba9b7a403d27">B43_DMA_30BIT</a>   = 30,
<a name="l00215"></a><a class="code" href="dma_8h.html#ae1cb884150a12334ea3bf1898ffbc59ca59701a93c6284f9ceae0c3cb50f2a816">00215</a>         <a class="code" href="dma_8h.html#ae1cb884150a12334ea3bf1898ffbc59ca59701a93c6284f9ceae0c3cb50f2a816">B43_DMA_32BIT</a>   = 32,
<a name="l00216"></a><a class="code" href="dma_8h.html#ae1cb884150a12334ea3bf1898ffbc59cae3da9fd10d1d5d40d2756956080869ab">00216</a>         <a class="code" href="dma_8h.html#ae1cb884150a12334ea3bf1898ffbc59cae3da9fd10d1d5d40d2756956080869ab">B43_DMA_64BIT</a>   = 64,
<a name="l00217"></a>00217 };
<a name="l00218"></a>00218 
<a name="l00219"></a><a class="code" href="dma_8h.html#a1cf0bc2d302052cbdde40d0af6a675b3">00219</a> <span class="keyword">enum</span> <a class="code" href="dma_8h.html#a1cf0bc2d302052cbdde40d0af6a675b3">b43_addrtype</a> {
<a name="l00220"></a><a class="code" href="dma_8h.html#a1cf0bc2d302052cbdde40d0af6a675b3af2e2df28b93799b2918984d06d55cbfc">00220</a>         <a class="code" href="dma_8h.html#a1cf0bc2d302052cbdde40d0af6a675b3af2e2df28b93799b2918984d06d55cbfc">B43_DMA_ADDR_LOW</a>,
<a name="l00221"></a><a class="code" href="dma_8h.html#a1cf0bc2d302052cbdde40d0af6a675b3a2f6acbd4b5ada76a8be554ca2109440e">00221</a>         <a class="code" href="dma_8h.html#a1cf0bc2d302052cbdde40d0af6a675b3a2f6acbd4b5ada76a8be554ca2109440e">B43_DMA_ADDR_HIGH</a>,
<a name="l00222"></a><a class="code" href="dma_8h.html#a1cf0bc2d302052cbdde40d0af6a675b3ab7cb310e52cfa7c91bd8f5b6c4195fd1">00222</a>         <a class="code" href="dma_8h.html#a1cf0bc2d302052cbdde40d0af6a675b3ab7cb310e52cfa7c91bd8f5b6c4195fd1">B43_DMA_ADDR_EXT</a>,
<a name="l00223"></a>00223 };
<a name="l00224"></a>00224 
<a name="l00225"></a><a class="code" href="structb43__dmaring.html">00225</a> <span class="keyword">struct </span><a class="code" href="structb43__dmaring.html">b43_dmaring</a> {
<a name="l00226"></a>00226         <span class="comment">/* Lowlevel DMA ops. */</span>
<a name="l00227"></a><a class="code" href="structb43__dmaring.html#a94c7dc44f70ba3375f219ea05009438f">00227</a>         <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structb43__dma__ops.html">b43_dma_ops</a> *<a class="code" href="structb43__dmaring.html#a94c7dc44f70ba3375f219ea05009438f">ops</a>;
<a name="l00228"></a>00228         <span class="comment">/* Kernel virtual base address of the ring memory. */</span>
<a name="l00229"></a><a class="code" href="structb43__dmaring.html#ab26f1abbf2998819d5835cc58576c134">00229</a>         <span class="keywordtype">void</span> *<a class="code" href="structb43__dmaring.html#ab26f1abbf2998819d5835cc58576c134">descbase</a>;
<a name="l00230"></a>00230         <span class="comment">/* Meta data about all descriptors. */</span>
<a name="l00231"></a><a class="code" href="structb43__dmaring.html#ac5c95a36b481eacbafbdb31ebd745baf">00231</a>         <span class="keyword">struct </span><a class="code" href="structb43__dmadesc__meta.html">b43_dmadesc_meta</a> *<a class="code" href="structb43__dmaring.html#ac5c95a36b481eacbafbdb31ebd745baf">meta</a>;
<a name="l00232"></a>00232         <span class="comment">/* Cache of TX headers for each TX frame.</span>
<a name="l00233"></a>00233 <span class="comment">         * This is to avoid an allocation on each TX.</span>
<a name="l00234"></a>00234 <span class="comment">         * This is NULL for an RX ring.</span>
<a name="l00235"></a>00235 <span class="comment">         */</span>
<a name="l00236"></a><a class="code" href="structb43__dmaring.html#aad839191c148cd87f8d0a9588a568705">00236</a>         u8 *<a class="code" href="structb43__dmaring.html#aad839191c148cd87f8d0a9588a568705">txhdr_cache</a>;
<a name="l00237"></a>00237         <span class="comment">/* (Unadjusted) DMA base bus-address of the ring memory. */</span>
<a name="l00238"></a><a class="code" href="structb43__dmaring.html#adae57256adf66265165f338178619420">00238</a>         dma_addr_t <a class="code" href="structb43__dmaring.html#adae57256adf66265165f338178619420">dmabase</a>;
<a name="l00239"></a>00239         <span class="comment">/* Number of descriptor slots in the ring. */</span>
<a name="l00240"></a><a class="code" href="structb43__dmaring.html#a26467ac626b52bdb794d6d4d4e9d148a">00240</a>         <span class="keywordtype">int</span> <a class="code" href="structb43__dmaring.html#a26467ac626b52bdb794d6d4d4e9d148a">nr_slots</a>;
<a name="l00241"></a>00241         <span class="comment">/* Number of used descriptor slots. */</span>
<a name="l00242"></a><a class="code" href="structb43__dmaring.html#a67d1d1c7b06538457ff727b29e22501a">00242</a>         <span class="keywordtype">int</span> <a class="code" href="structb43__dmaring.html#a67d1d1c7b06538457ff727b29e22501a">used_slots</a>;
<a name="l00243"></a>00243         <span class="comment">/* Currently used slot in the ring. */</span>
<a name="l00244"></a><a class="code" href="structb43__dmaring.html#afeede7911e138b41e882692ef0dab905">00244</a>         <span class="keywordtype">int</span> <a class="code" href="structb43__dmaring.html#afeede7911e138b41e882692ef0dab905">current_slot</a>;
<a name="l00245"></a>00245         <span class="comment">/* Frameoffset in octets. */</span>
<a name="l00246"></a><a class="code" href="structb43__dmaring.html#a5611ee27beb9bb6f4eaaa9d5efb949a1">00246</a>         u32 <a class="code" href="structb43__dmaring.html#a5611ee27beb9bb6f4eaaa9d5efb949a1">frameoffset</a>;
<a name="l00247"></a>00247         <span class="comment">/* Descriptor buffer size. */</span>
<a name="l00248"></a><a class="code" href="structb43__dmaring.html#a4e56810da03f7965be2e2b2df2fe0133">00248</a>         u16 <a class="code" href="structb43__dmaring.html#a4e56810da03f7965be2e2b2df2fe0133">rx_buffersize</a>;
<a name="l00249"></a>00249         <span class="comment">/* The MMIO base register of the DMA controller. */</span>
<a name="l00250"></a><a class="code" href="structb43__dmaring.html#ae43f557e2917f91355af7cc8ba3e8576">00250</a>         u16 <a class="code" href="structb43__dmaring.html#ae43f557e2917f91355af7cc8ba3e8576">mmio_base</a>;
<a name="l00251"></a>00251         <span class="comment">/* DMA controller index number (0-5). */</span>
<a name="l00252"></a><a class="code" href="structb43__dmaring.html#a50866022abe8401147d0d052ac043b72">00252</a>         <span class="keywordtype">int</span> <a class="code" href="structb43__dmaring.html#a50866022abe8401147d0d052ac043b72">index</a>;
<a name="l00253"></a>00253         <span class="comment">/* Boolean. Is this a TX ring? */</span>
<a name="l00254"></a><a class="code" href="structb43__dmaring.html#abe872c0f95d34c90a623a7c186d1ea2b">00254</a>         <span class="keywordtype">bool</span> <a class="code" href="structb43__dmaring.html#abe872c0f95d34c90a623a7c186d1ea2b">tx</a>;
<a name="l00255"></a>00255         <span class="comment">/* The type of DMA engine used. */</span>
<a name="l00256"></a><a class="code" href="structb43__dmaring.html#a77a8ffcc7117da66b2cf0878b8ee4062">00256</a>         <span class="keyword">enum</span> <a class="code" href="dma_8h.html#ae1cb884150a12334ea3bf1898ffbc59c">b43_dmatype</a> <a class="code" href="structb43__dmaring.html#a77a8ffcc7117da66b2cf0878b8ee4062">type</a>;
<a name="l00257"></a>00257         <span class="comment">/* Boolean. Is this ring stopped at ieee80211 level? */</span>
<a name="l00258"></a><a class="code" href="structb43__dmaring.html#ae3b609860a345bc78e899b8b1c4bb5ff">00258</a>         <span class="keywordtype">bool</span> <a class="code" href="structb43__dmaring.html#ae3b609860a345bc78e899b8b1c4bb5ff">stopped</a>;
<a name="l00259"></a>00259         <span class="comment">/* The QOS priority assigned to this ring. Only used for TX rings.</span>
<a name="l00260"></a>00260 <span class="comment">         * This is the mac80211 &quot;queue&quot; value. */</span>
<a name="l00261"></a><a class="code" href="structb43__dmaring.html#af7a415100252d0a6ba698fba216d59f6">00261</a>         u8 <a class="code" href="structb43__dmaring.html#af7a415100252d0a6ba698fba216d59f6">queue_prio</a>;
<a name="l00262"></a><a class="code" href="structb43__dmaring.html#a12ff354324f87d741731d759e9ad1123">00262</a>         <span class="keyword">struct </span><a class="code" href="structb43__wldev.html">b43_wldev</a> *<a class="code" href="structb43__dmaring.html#a12ff354324f87d741731d759e9ad1123">dev</a>;
<a name="l00263"></a>00263 <span class="preprocessor">#ifdef CONFIG_B43_DEBUG</span>
<a name="l00264"></a>00264 <span class="preprocessor"></span>        <span class="comment">/* Maximum number of used slots. */</span>
<a name="l00265"></a>00265         <span class="keywordtype">int</span> max_used_slots;
<a name="l00266"></a>00266         <span class="comment">/* Last time we injected a ring overflow. */</span>
<a name="l00267"></a>00267         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> last_injected_overflow;
<a name="l00268"></a>00268         <span class="comment">/* Statistics: Number of successfully transmitted packets */</span>
<a name="l00269"></a>00269         u64 nr_succeed_tx_packets;
<a name="l00270"></a>00270         <span class="comment">/* Statistics: Number of failed TX packets */</span>
<a name="l00271"></a>00271         u64 nr_failed_tx_packets;
<a name="l00272"></a>00272         <span class="comment">/* Statistics: Total number of TX plus all retries. */</span>
<a name="l00273"></a>00273         u64 nr_total_packet_tries;
<a name="l00274"></a>00274 <span class="preprocessor">#endif </span><span class="comment">/* CONFIG_B43_DEBUG */</span>
<a name="l00275"></a>00275 };
<a name="l00276"></a>00276 
<a name="l00277"></a><a class="code" href="dma_8h.html#ae1309cee7f3cbe37e79fce0e9e9544bb">00277</a> <span class="keyword">static</span> <span class="keyword">inline</span> u32 <a class="code" href="dma_8h.html#ae1309cee7f3cbe37e79fce0e9e9544bb">b43_dma_read</a>(<span class="keyword">struct</span> <a class="code" href="structb43__dmaring.html">b43_dmaring</a> *ring, u16 offset)
<a name="l00278"></a>00278 {
<a name="l00279"></a>00279         <span class="keywordflow">return</span> <a class="code" href="b43_8h.html#adfd04e75bffd22461c0c7a3eab648ea1">b43_read32</a>(ring-&gt;<a class="code" href="structb43__dmaring.html#a12ff354324f87d741731d759e9ad1123">dev</a>, ring-&gt;<a class="code" href="structb43__dmaring.html#ae43f557e2917f91355af7cc8ba3e8576">mmio_base</a> + offset);
<a name="l00280"></a>00280 }
<a name="l00281"></a>00281 
<a name="l00282"></a><a class="code" href="dma_8h.html#a9046eb73a6fb2b7c1ebe9e4122d52e53">00282</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="dma_8h.html#a9046eb73a6fb2b7c1ebe9e4122d52e53">b43_dma_write</a>(<span class="keyword">struct</span> <a class="code" href="structb43__dmaring.html">b43_dmaring</a> *ring, u16 offset, u32 value)
<a name="l00283"></a>00283 {
<a name="l00284"></a>00284         <a class="code" href="b43_8h.html#a44d913e8694345c005f13a9a95040cd9">b43_write32</a>(ring-&gt;<a class="code" href="structb43__dmaring.html#a12ff354324f87d741731d759e9ad1123">dev</a>, ring-&gt;<a class="code" href="structb43__dmaring.html#ae43f557e2917f91355af7cc8ba3e8576">mmio_base</a> + offset, value);
<a name="l00285"></a>00285 }
<a name="l00286"></a>00286 
<a name="l00287"></a>00287 <span class="keywordtype">int</span> <a class="code" href="dma_8c.html#af58e92bc09dc1b51a8793b3073ce0248">b43_dma_init</a>(<span class="keyword">struct</span> <a class="code" href="structb43__wldev.html">b43_wldev</a> *<a class="code" href="structb43__wldev.html#afd2240bbde9b9c300e8817aa90e1580b">dev</a>);
<a name="l00288"></a>00288 <span class="keywordtype">void</span> <a class="code" href="dma_8c.html#aa569f23264a9ec2a97a61549ae8fca2b">b43_dma_free</a>(<span class="keyword">struct</span> <a class="code" href="structb43__wldev.html">b43_wldev</a> *<a class="code" href="structb43__wldev.html#afd2240bbde9b9c300e8817aa90e1580b">dev</a>);
<a name="l00289"></a>00289 
<a name="l00290"></a>00290 <span class="keywordtype">void</span> <a class="code" href="dma_8c.html#a8af3fa81b6754afca3c6f493509170e5">b43_dma_tx_suspend</a>(<span class="keyword">struct</span> <a class="code" href="structb43__wldev.html">b43_wldev</a> *<a class="code" href="structb43__wldev.html#afd2240bbde9b9c300e8817aa90e1580b">dev</a>);
<a name="l00291"></a>00291 <span class="keywordtype">void</span> <a class="code" href="dma_8c.html#af7db191150733e6214208de6fc32cf11">b43_dma_tx_resume</a>(<span class="keyword">struct</span> <a class="code" href="structb43__wldev.html">b43_wldev</a> *<a class="code" href="structb43__wldev.html#afd2240bbde9b9c300e8817aa90e1580b">dev</a>);
<a name="l00292"></a>00292 
<a name="l00293"></a>00293 <span class="keywordtype">int</span> <a class="code" href="dma_8c.html#a0f8265abb525aff60f65e826d95a586b">b43_dma_tx</a>(<span class="keyword">struct</span> <a class="code" href="structb43__wldev.html">b43_wldev</a> *<a class="code" href="structb43__wldev.html#afd2240bbde9b9c300e8817aa90e1580b">dev</a>,
<a name="l00294"></a>00294                <span class="keyword">struct</span> sk_buff *skb);
<a name="l00295"></a>00295 <span class="keywordtype">void</span> <a class="code" href="dma_8c.html#a6edf1ab4532356478322d3d9b59a9d4a">b43_dma_handle_txstatus</a>(<span class="keyword">struct</span> <a class="code" href="structb43__wldev.html">b43_wldev</a> *<a class="code" href="structb43__wldev.html#afd2240bbde9b9c300e8817aa90e1580b">dev</a>,
<a name="l00296"></a>00296                              <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structb43__txstatus.html">b43_txstatus</a> *status);
<a name="l00297"></a>00297 
<a name="l00298"></a>00298 <span class="keywordtype">void</span> <a class="code" href="dma_8c.html#a602ebfa7592b84fdc044824f676f6643">b43_dma_rx</a>(<span class="keyword">struct</span> <a class="code" href="structb43__dmaring.html">b43_dmaring</a> *ring);
<a name="l00299"></a>00299 
<a name="l00300"></a>00300 <span class="keywordtype">void</span> <a class="code" href="dma_8c.html#af32e64d498bb8e925e418bd588cb9fd7">b43_dma_direct_fifo_rx</a>(<span class="keyword">struct</span> <a class="code" href="structb43__wldev.html">b43_wldev</a> *<a class="code" href="structb43__wldev.html#afd2240bbde9b9c300e8817aa90e1580b">dev</a>,
<a name="l00301"></a>00301                             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> engine_index, <span class="keywordtype">bool</span> enable);
<a name="l00302"></a>00302 
<a name="l00303"></a>00303 <span class="preprocessor">#endif </span><span class="comment">/* B43_DMA_H_ */</span>
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Apr 11 22:05:15 2013 for CompatWireless3.2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
